{"programModules":{"EXT620MI":{"program":"EXT620MI","triggers":{},"transactions":{"lstSupplierTrns":{"sourceUuid":"c556fdf1-0b23-41bc-a34b-29a5124a7353","name":"lstSupplierTrns","program":"EXT620MI","description":"lstSupplierTrns","active":true,"multi":true,"modified":1762258590470,"modifiedBy":"YAEL","outputFields":[{"name":"DIVI","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"SPYN","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SUNO","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SINO","description":"","length":12,"mandatory":false,"type":"A","refField":null},{"name":"VSER","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"VONO","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"ACDT","description":"","length":8,"mandatory":false,"type":"A","refField":null},{"name":"DUDT","description":"","length":8,"mandatory":false,"type":"A","refField":null},{"name":"CUAM","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"DBCR","description":"","length":1,"mandatory":false,"type":"A","refField":null},{"name":"CUCD","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"RMSV","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"PMSV","description":"","length":20,"mandatory":false,"type":"A","refField":null},{"name":"CHKN","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"TRCD","description":"","length":2,"mandatory":false,"type":"A","refField":null},{"name":"FEID","description":"","length":4,"mandatory":false,"type":"A","refField":null},{"name":"FNCN","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"VTXT","description":"","length":40,"mandatory":false,"type":"A","refField":null},{"name":"ACAM","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"TCAM","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"TX15","description":"","length":15,"mandatory":false,"type":"A","refField":null},{"name":"DBIT","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"CDIT","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"LABL","description":"LABEL","length":100,"mandatory":false,"type":"A","refField":null},{"name":"IVTP","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"BLNC","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"ASM1","description":"","length":20,"mandatory":false,"type":"A","refField":null},{"name":"ASM2","description":"","length":20,"mandatory":false,"type":"A","refField":null},{"name":"IVDT","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"TX40","description":"","length":40,"mandatory":false,"type":"A","refField":null},{"name":"VDSC","description":"Transaction description","length":8,"mandatory":false,"type":"A","refField":null}],"inputFields":[{"name":"CONO","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"DIVI","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"SPYN","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SUNO","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"FDAT","description":"","length":8,"mandatory":false,"type":"A","refField":null},{"name":"TDAT","description":"","length":8,"mandatory":false,"type":"A","refField":null}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"c556fdf1-0b23-41bc-a34b-29a5124a7353":{"uuid":"c556fdf1-0b23-41bc-a34b-29a5124a7353","updated":1763467979519,"updatedBy":"YAEL","created":1749032758668,"createdBy":"STAS","apiVersion":"0.9","beVersion":"16.0.0.20250917153352.6","language":"GROOVY","codeHash":"C861C6B441F67B89F239E3163F3B5248779572CEE701247F0250FA0F19D9E9C8","code":"aW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGU7DQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcjsNCmltcG9ydCBqYXZhLnV0aWwuKjsNCg0KcHVibGljIGNsYXNzIGxzdFN1cHBsaWVyVHJucyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlOw0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsNCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyOw0KICBwcml2YXRlIGZpbmFsIExpc3Q8TWFwPFN0cmluZywgU3RyaW5nPj4gcmVzdWx0UmVjb3JkcyA9IG5ldyBBcnJheUxpc3Q8PigpOw0KICBwcml2YXRlIGZpbmFsIE1hcDxTdHJpbmcsIERvdWJsZT4gb3BlbmluZ0JhbGFuY2VzID0gbmV3IEhhc2hNYXA8PigpOw0KICBwcml2YXRlIGZpbmFsIE1hcDxTdHJpbmcsIERvdWJsZT4gb3BlbmluZ0RlYml0cyA9IG5ldyBIYXNoTWFwPD4oKTsNCiAgcHJpdmF0ZSBmaW5hbCBNYXA8U3RyaW5nLCBEb3VibGU+IG9wZW5pbmdDcmVkaXRzID0gbmV3IEhhc2hNYXA8PigpOw0KDQogIHB1YmxpYyBsc3RTdXBwbGllclRybnMoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBQcm9ncmFtQVBJIHByb2dyYW0sIExvZ2dlckFQSSBsb2dnZXIpIHsNCiAgICB0aGlzLm1pID0gbWk7DQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlOw0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07DQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7DQogIH0NCiAgDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgU3RyaW5nIGNvbm8gPSBtaS5pbkRhdGEuZ2V0KCJDT05PIikgIT0gbnVsbCA/IG1pLmluRGF0YS5nZXQoIkNPTk8iKS50cmltKCkgOiAiNzUwIjsNCiAgICBTdHJpbmcgZGl2aSA9IG1pLmluRGF0YS5nZXQoIkRJVkkiKSAhPSBudWxsID8gbWkuaW5EYXRhLmdldCgiRElWSSIpLnRyaW0oKSA6ICJJU1IiOw0KICAgIFN0cmluZyBzdW5vID0gbWkuaW5EYXRhLmdldCgiU1VOTyIpICE9IG51bGwgPyBtaS5pbkRhdGEuZ2V0KCJTVU5PIikudHJpbSgpIDogIiI7DQogICAgU3RyaW5nIHNweW4gPSBtaS5pbkRhdGEuZ2V0KCJTUFlOIikgIT0gbnVsbCA/IG1pLmluRGF0YS5nZXQoIlNQWU4iKS50cmltKCkgOiAiIjsNCiAgICBpZiAoKHN1bm8gPT0gbnVsbCB8fCBzdW5vLmlzRW1wdHkoKSkgJiYgKHNweW4gPT0gbnVsbCB8fCBzcHluLmlzRW1wdHkoKSkpIHsNCiAgICAgIG1pLmVycm9yKCJTUFlOIG9yIFNVTk8gbXVzdCBiZSBlbnRlcmVkLiIpOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpbnQgZmRhdCA9IG1pLmluRGF0YS5nZXQoIkZEQVQiKSAhPSBudWxsICYmICFtaS5pbkRhdGEuZ2V0KCJGREFUIikudHJpbSgpLmlzRW1wdHkoKQ0KICAgICAgPyBJbnRlZ2VyLnBhcnNlSW50KG1pLmluRGF0YS5nZXQoIkZEQVQiKSkNCiAgICAgIDogMTkwMDAxMDE7DQogICAgU3RyaW5nIHRkYXRTdHIgPSBtaS5pbkRhdGEuZ2V0KCJUREFUIik7DQogICAgaW50IHRkYXQ7DQogICAgaWYgKHRkYXRTdHIgPT0gbnVsbCB8fCB0ZGF0U3RyLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIHRkYXQgPSBnZXRUb2RheSgpOw0KICAgIH0gZWxzZSB7DQogICAgICB0ZGF0ID0gSW50ZWdlci5wYXJzZUludCh0ZGF0U3RyLnRyaW0oKSk7DQogICAgfQ0KICAgIGlmIChmZGF0ID4gMTkwMDAxMDEpIHsNCiAgICAgIGNhbGN1bGF0ZU9wZW5pbmdCYWxhbmNlcyhjb25vLCBkaXZpLCBzcHluLCBzdW5vLCBmZGF0KTsNCiAgICB9DQogICAgcHJvY2Vzc1N1cHBsaWVyVHJhbnNhY3Rpb25zKGNvbm8sIGRpdmksIHNweW4sIHN1bm8sIGZkYXQsIHRkYXQpOw0KICAgIGJ1YmJsZVNvcnQoKTsNCiAgICBvdXRwdXRSZXN1bHRzKCk7DQogIH0NCiAgDQogIHByaXZhdGUgdm9pZCBjYWxjdWxhdGVPcGVuaW5nQmFsYW5jZXMoU3RyaW5nIGNvbm8sIFN0cmluZyBkaXZpLCBTdHJpbmcgc3B5biwgU3RyaW5nIHN1bm8sIGludCBmZGF0KSB7DQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZnBsZWRnRXhwID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVERyIpDQogICAgICAuZXEoIkVQQ09OTyIsIGNvbm8pDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBESVZJIiwgZGl2aSkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5sdCgiRVBBQ0RUIiwgU3RyaW5nLnZhbHVlT2YoZmRhdCkpKQ0KICAgICAgLmFuZCgNCiAgICAgICAgZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVERyIpLmVxKCJFUFRSQ0QiLCAiNDAiKQ0KICAgICAgICAub3IoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVERyIpLmVxKCJFUFRSQ0QiLCAiNTAiKSkNCiAgICAgICk7DQogIA0KICAgIGlmIChzcHluICE9IG51bGwgJiYgIXNweW4uaXNFbXB0eSgpKSB7DQogICAgICBmcGxlZGdFeHAgPSBmcGxlZGdFeHAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBTUFlOIiwgc3B5bikpOw0KICAgIH0NCiAgICBpZiAoc3VubyAhPSBudWxsICYmICFzdW5vLmlzRW1wdHkoKSkgew0KICAgICAgZnBsZWRnRXhwID0gZnBsZWRnRXhwLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikuZXEoIkVQU1VOTyIsIHN1bm8pKTsNCiAgICB9DQogIA0KICAgIERCQWN0aW9uIGZwbGVkZ1F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkZQTEVERyIpDQogICAgICAuaW5kZXgoIjEwIikNCiAgICAgIC5tYXRjaGluZyhmcGxlZGdFeHApDQogICAgICAuc2VsZWN0aW9uKCJFUERJVkkiLCAiRVBTUFlOIiwgIkVQU1VOTyIsICJFUFNJTk8iLCAiRVBWU0VSIiwgIkVQVk9OTyIsDQogICAgICAgICAgICAgICAgICJFUEFDRFQiLCAiRVBEVURUIiwgIkVQQ1VBTSIsICJFUFRSQ0QiLCAiRVBDT05PIiwNCiAgICAgICAgICAgICAgICAgIkVQWUVBNCIsICJFUEpSTk8iLCAiRVBKU05PIiwgIkVQSVZUUCIpDQogICAgICAuYnVpbGQoKTsNCiAgDQogICAgREJDb250YWluZXIgZnBsZWRnQ29udGFpbmVyID0gZnBsZWRnUXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgZnBsZWRnUXVlcnkucmVhZEFsbChmcGxlZGdDb250YWluZXIsIDAsIHsgREJDb250YWluZXIgZnBSZWNvcmQgLT4NCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkID0gY3JlYXRlQmFzZVJlY29yZChmcFJlY29yZCk7DQogICAgICBTdHJpbmcgcmVjb3JkU3B5biA9IHJlY29yZC5nZXQoIlNQWU4iKTsNCiAgICAgIFN0cmluZyByZWNvcmRTdW5vID0gcmVjb3JkLmdldCgiU1VOTyIpOw0KICAgICAgDQogICAgICBpZiAoam9pbldpdGhGR0xFREcocmVjb3JkLCBjb25vKSkgew0KICAgICAgICBTdHJpbmcgZGJjciA9IHJlY29yZC5nZXQoIkRCQ1IiKTsNCiAgICAgICAgZG91YmxlIGN1YW0gPSBNYXRoLmFicyhwYXJzZUFtb3VudChyZWNvcmQuZ2V0KCJDVUFNIikpKTsvL1lhZWwgYWRkIE1hdGguYWJzKCkgMDYuMTEuMjAyNS4gSXQgd2FzIGluIGNyZWF0ZUJhc2VSZWNvcmQgYnV0IEkgY2FuY2VsZWQgaXQuDQogICAgICAgIFN0cmluZyBrZXkgPSByZWNvcmRTcHluICsgIl8iICsgcmVjb3JkU3VubzsNCiAgICAgICAgDQogICAgICAgIGlmICgiRCIuZXF1YWxzKGRiY3IpKSB7DQogICAgICAgICAgICBvcGVuaW5nQmFsYW5jZXMucHV0KGtleSwgb3BlbmluZ0JhbGFuY2VzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpICsgY3VhbSk7DQogICAgICAgICAgICBvcGVuaW5nRGViaXRzLnB1dChrZXksIG9wZW5pbmdEZWJpdHMuZ2V0T3JEZWZhdWx0KGtleSwgMC4wZCkgKyBjdWFtKTsNCiAgICAgICAgfSBlbHNlIGlmICgiQyIuZXF1YWxzKGRiY3IpKSB7DQogICAgICAgICAgICBvcGVuaW5nQmFsYW5jZXMucHV0KGtleSwgb3BlbmluZ0JhbGFuY2VzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpIC0gY3VhbSk7DQogICAgICAgICAgICBvcGVuaW5nQ3JlZGl0cy5wdXQoa2V5LCBvcGVuaW5nQ3JlZGl0cy5nZXRPckRlZmF1bHQoa2V5LCAwLjBkKSArIGN1YW0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSk7DQogIH0NCiAgDQogIHByaXZhdGUgdm9pZCBwcm9jZXNzU3VwcGxpZXJUcmFuc2FjdGlvbnMoU3RyaW5nIGNvbm8sIFN0cmluZyBkaXZpLCBTdHJpbmcgc3B5biwgU3RyaW5nIHN1bm8sIGludCBmZGF0LCBpbnQgdGRhdCkgew0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGZwbGVkZ0V4cCA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKQ0KICAgICAgLmVxKCJFUENPTk8iLCBjb25vKQ0KICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikuZXEoIkVQRElWSSIsIGRpdmkpKQ0KICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikuZ2UoIkVQQUNEVCIsIFN0cmluZy52YWx1ZU9mKGZkYXQpKSkNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVERyIpLmxlKCJFUEFDRFQiLCBTdHJpbmcudmFsdWVPZih0ZGF0KSkpDQogICAgICAuYW5kKA0KICAgICAgICBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikuZXEoIkVQVFJDRCIsICI0MCIpDQogICAgICAgIC5vcihkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikuZXEoIkVQVFJDRCIsICI1MCIpKQ0KICAgICAgKTsNCiAgICAgIA0KICAgIGlmIChzcHluICE9IG51bGwgJiYgIXNweW4uaXNFbXB0eSgpKSB7DQogICAgICBmcGxlZGdFeHAgPSBmcGxlZGdFeHAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBTUFlOIiwgc3B5bikpOw0KICAgIH0NCiAgICBpZiAoc3VubyAhPSBudWxsICYmICFzdW5vLmlzRW1wdHkoKSkgew0KICAgICAgZnBsZWRnRXhwID0gZnBsZWRnRXhwLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikuZXEoIkVQU1VOTyIsIHN1bm8pKTsNCiAgICB9DQogICAgICANCiAgICBEQkFjdGlvbiBmcGxlZGdRdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJGUExFREciKQ0KICAgICAgLmluZGV4KCIxMCIpDQogICAgICAubWF0Y2hpbmcoZnBsZWRnRXhwKQ0KICAgICAgLnNlbGVjdGlvbigiRVBESVZJIiwgIkVQU1BZTiIsICJFUFNVTk8iLCAiRVBTSU5PIiwgIkVQVlNFUiIsICJFUFZPTk8iLA0KICAgICAgICAgICAgICAgICAiRVBBQ0RUIiwgIkVQRFVEVCIsICJFUENVQU0iLCAiRVBUUkNEIiwgIkVQQ09OTyIsDQogICAgICAgICAgICAgICAgICJFUFlFQTQiLCAiRVBKUk5PIiwgIkVQSlNOTyIsICJFUElWVFAiLCAiRVBJVkRUIikNCiAgICAgIC5idWlsZCgpOw0KICAgICAgDQogICAgREJDb250YWluZXIgZnBsZWRnQ29udGFpbmVyID0gZnBsZWRnUXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgZnBsZWRnUXVlcnkucmVhZEFsbChmcGxlZGdDb250YWluZXIsIDAsIHsgREJDb250YWluZXIgZnBSZWNvcmQgLT4NCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkID0gY3JlYXRlQmFzZVJlY29yZChmcFJlY29yZCk7DQogICAgICBpZiAoam9pbldpdGhGR0xFREcocmVjb3JkLCBjb25vKSkgew0KICAgICAgICBTdHJpbmcgdHJjZCA9IHJlY29yZC5nZXQoIlRSQ0QiKTsvL1lhZWwgMDYvMTEvMjAyNS4NCiAgICAgICAgICBqb2luV2l0aEZQTEVEWChyZWNvcmQsIGNvbm8sICI0MDkiKTsNCiAgICAgICAgICBqb2luV2l0aEZQTEVEWChyZWNvcmQsIGNvbm8sICI0MDYiKTsNCiAgICAgICAgICBqb2luV2l0aEZQTEVEWChyZWNvcmQsIGNvbm8sICI0NTAiKTsNCiAgICAgICAgICBqb2luV2l0aEZQTEVEWChyZWNvcmQsIGNvbm8sICI0MDQiKTsvL1lhZWwgMDQvMTEvMjAyNS4NCiAgICAgICAgam9pbldpdGhDU1lOQlYocmVjb3JkLCBjb25vKTsNCiAgICAgICAgLy9qb2luV2l0aEZBUENISyhyZWNvcmQsIGNvbm8pOy8vWWFlbCAwNC8xMS8yMDI1Lg0KICAgICAgICAvL2pvaW5XaXRoQ1NZVEFCKHJlY29yZCwgY29ubywgc3Vubyk7Ly9ZYWVsIDA0LzExLzIwMjUuDQogICAgICAgIGNhbGN1bGF0ZURlYml0Q3JlZGl0KHJlY29yZCk7DQogICAgICAgIHNldEFzbWFraHRhVmFsdWVzKHJlY29yZCk7DQogICAgICAgIHJlc3VsdFJlY29yZHMuYWRkKHJlY29yZCk7DQogICAgICB9DQogICAgfSk7DQogIH0NCg0KICBwcml2YXRlIE1hcDxTdHJpbmcsIFN0cmluZz4gY3JlYXRlQmFzZVJlY29yZChEQkNvbnRhaW5lciBmcFJlY29yZCkgew0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkID0gbmV3IEhhc2hNYXA8PigpOw0KICAgIHJlY29yZC5wdXQoIkRJVkkiLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQRElWSSIpKSk7DQogICAgcmVjb3JkLnB1dCgiU1BZTiIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBTUFlOIikpKTsNCiAgICByZWNvcmQucHV0KCJTVU5PIiwgU3RyaW5nLnZhbHVlT2YoZnBSZWNvcmQuZ2V0KCJFUFNVTk8iKSkpOw0KICAgIHJlY29yZC5wdXQoIlNJTk8iLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQU0lOTyIpKSk7DQogICAgcmVjb3JkLnB1dCgiVlNFUiIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBWU0VSIikpKTsNCiAgICByZWNvcmQucHV0KCJWT05PIiwgU3RyaW5nLnZhbHVlT2YoZnBSZWNvcmQuZ2V0KCJFUFZPTk8iKSkpOw0KICAgIHJlY29yZC5wdXQoIkFDRFQiLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQQUNEVCIpKSk7DQogICAgcmVjb3JkLnB1dCgiRFVEVCIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBEVURUIikpKTsNCiAgICBkb3VibGUgY3VhbSA9IChEb3VibGUpZnBSZWNvcmQuZ2V0KCJFUENVQU0iKTsNCiAgICAvL3JlY29yZC5wdXQoIkNVQU0iLCBmb3JtYXRBbW91bnQoTWF0aC5hYnMoY3VhbSkpKTsNCiAgICByZWNvcmQucHV0KCJDVUFNIiwgZm9ybWF0QW1vdW50KGN1YW0pKTsvL1lhZWwgcmVtb3ZlIE1hdGguYWJzKGN1YW0pIDA0LzExLzIwMjUNCiAgICByZWNvcmQucHV0KCJUUkNEIiwgU3RyaW5nLnZhbHVlT2YoZnBSZWNvcmQuZ2V0KCJFUFRSQ0QiKSkpOw0KICAgIHJlY29yZC5wdXQoIllFQTQiLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQWUVBNCIpKSk7DQogICAgcmVjb3JkLnB1dCgiSlJOTyIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBKUk5PIikpKTsNCiAgICByZWNvcmQucHV0KCJKU05PIiwgU3RyaW5nLnZhbHVlT2YoZnBSZWNvcmQuZ2V0KCJFUEpTTk8iKSkpOw0KICAgIHJlY29yZC5wdXQoIklWVFAiLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQSVZUUCIpKSk7DQogICAgcmVjb3JkLnB1dCgiUk1TViIsICIiKTsNCiAgICByZWNvcmQucHV0KCJQTVNWIiwgIiIpOw0KICAgIHJlY29yZC5wdXQoIkNIS04iLCAiIik7DQogICAgcmVjb3JkLnB1dCgiVFgxNSIsICIiKTsNCiAgICByZWNvcmQucHV0KCJEQklUIiwgIjAuMDAiKTsNCiAgICByZWNvcmQucHV0KCJDRElUIiwgIjAuMDAiKTsNCiAgICByZWNvcmQucHV0KCJGRUlEIiwgIiIpOw0KICAgIHJlY29yZC5wdXQoIkZOQ04iLCAiIik7DQogICAgcmVjb3JkLnB1dCgiVlRYVCIsICIiKTsNCiAgICByZWNvcmQucHV0KCJBQ0FNIiwgIjAuMDAiKTsNCiAgICByZWNvcmQucHV0KCJUQ0FNIiwgIjAuMDAiKTsNCiAgICByZWNvcmQucHV0KCJEQkNSIiwgIiIpOw0KICAgIHJlY29yZC5wdXQoIkNVQ0QiLCAiIik7DQogICAgcmVjb3JkLnB1dCgiQVNNMSIsICIiKTsgDQogICAgcmVjb3JkLnB1dCgiQVNNMiIsICIiKTsgDQogICAgLy9yZWNvcmQucHV0KCJUWDQwIiwgIiIpOy8vWWFlbCAwNC8xMS8yMDI1DQogICAgcmVjb3JkLnB1dCgiSVZEVCIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBJVkRUIikpKTsNCiAgICByZXR1cm4gcmVjb3JkOw0KICB9DQogIA0KICBwcml2YXRlIGJvb2xlYW4gam9pbldpdGhGR0xFREcoTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQsIFN0cmluZyBjb25vKSB7DQogICAgU3RyaW5nIHllYTQgPSByZWNvcmQuZ2V0KCJZRUE0Iik7DQogICAgU3RyaW5nIGpybm8gPSByZWNvcmQuZ2V0KCJKUk5PIik7DQogICAgU3RyaW5nIGpzbm8gPSByZWNvcmQuZ2V0KCJKU05PIik7DQogICAgU3RyaW5nIHRyY2QgPSByZWNvcmQuZ2V0KCJUUkNEIik7DQogICAgU3RyaW5nIGl2dHAgPSByZWNvcmQuZ2V0KCJJVlRQIik7DQogICAgU3RyaW5nIGRpdmkgPSByZWNvcmQuZ2V0KCJESVZJIik7DQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZmdsZWRnRXhwID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZHTEVERyIpDQogICAgICAuZXEoIkVHQ09OTyIsIGNvbm8pDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGR0xFREciKS5lcSgiRUdESVZJIiwgZGl2aSkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGR0xFREciKS5lcSgiRUdZRUE0IiwgeWVhNCkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGR0xFREciKS5lcSgiRUdKUk5PIiwganJubykpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGR0xFREciKS5lcSgiRUdKU05PIiwganNubykpOw0KICAgIERCQWN0aW9uIGZnbGVkZ1F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkZHTEVERyIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5tYXRjaGluZyhmZ2xlZGdFeHApDQogICAgICAuc2VsZWN0aW9uKCJFR0FDQU0iLCAiRUdUQ0FNIiwgIkVHREJDUiIsICJFR0NVQ0QiLCAiRUdGRUlEIiwgIkVHRk5DTiIsICJFR1ZUWFQiLCAiRUdWRFNDIikNCiAgICAgIC5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGZnbGVkZ0NvbnRhaW5lciA9IGZnbGVkZ1F1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGZpbmFsIGJvb2xlYW5bXSBmb3VuZCA9IFtmYWxzZV07DQogICAgZmdsZWRnUXVlcnkucmVhZEFsbChmZ2xlZGdDb250YWluZXIsIDAsIHsgREJDb250YWluZXIgZmdSZWNvcmQgLT4NCiAgICAgIFN0cmluZyBmZWlkID0gU3RyaW5nLnZhbHVlT2YoZmdSZWNvcmQuZ2V0KCJFR0ZFSUQiKSk7DQogICAgICBTdHJpbmcgZm5jbiA9IFN0cmluZy52YWx1ZU9mKGZnUmVjb3JkLmdldCgiRUdGTkNOIikpOw0KICAgICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7DQogICAgICBpZiAoIjQwIi5lcXVhbHModHJjZCkgJiYgKCJBUDEwIi5lcXVhbHMoZmVpZCkgfHwgIkFQNTAiLmVxdWFscyhmZWlkKSkpIHsvL1lhZWwgYWRkIHx8ICJBUDUwIi5lcXVhbHMoZmVpZCkuIDA0LzExLzIwMjUNCiAgICAgICAgaXNWYWxpZCA9IHRydWU7DQogICAgICB9IGVsc2UgaWYgKCI0MCIuZXF1YWxzKHRyY2QpICYmICgiQVAiLmVxdWFscyhpdnRwKSB8fCAiUFIiLmVxdWFscyhpdnRwKSkpIHsNCiAgICAgICAgaXNWYWxpZCA9IHRydWU7DQogICAgICB9IGVsc2UgaWYgKCI1MCIuZXF1YWxzKHRyY2QpICYmICEiNTAwIi5lcXVhbHMoZm5jbikpIHsNCiAgICAgICAgaXNWYWxpZCA9IHRydWU7DQogICAgICB9DQogICAgICBpZiAoaXNWYWxpZCkgew0KICAgICAgICByZWNvcmQucHV0KCJEQkNSIiwgU3RyaW5nLnZhbHVlT2YoZmdSZWNvcmQuZ2V0KCJFR0RCQ1IiKSkpOw0KICAgICAgICByZWNvcmQucHV0KCJDVUNEIiwgU3RyaW5nLnZhbHVlT2YoZmdSZWNvcmQuZ2V0KCJFR0NVQ0QiKSkpOw0KICAgICAgICBkb3VibGUgYWNhbSA9IChEb3VibGUpZmdSZWNvcmQuZ2V0KCJFR0FDQU0iKTsNCiAgICAgICAgZG91YmxlIHRjYW0gPSAoRG91YmxlKWZnUmVjb3JkLmdldCgiRUdUQ0FNIik7DQogICAgICAgIHJlY29yZC5wdXQoIkFDQU0iLCBmb3JtYXRBbW91bnQoYWNhbSkpOw0KICAgICAgICByZWNvcmQucHV0KCJUQ0FNIiwgZm9ybWF0QW1vdW50KHRjYW0pKTsNCiAgICAgICAgcmVjb3JkLnB1dCgiRkVJRCIsIGZlaWQpOw0KICAgICAgICByZWNvcmQucHV0KCJGTkNOIiwgZm5jbik7DQogICAgICAgIHJlY29yZC5wdXQoIlZUWFQiLCBTdHJpbmcudmFsdWVPZihmZ1JlY29yZC5nZXQoIkVHVlRYVCIpKSk7DQogICAgICAgIHJlY29yZC5wdXQoIlZEU0MiLCBTdHJpbmcudmFsdWVPZihmZ1JlY29yZC5nZXQoIkVHVkRTQyIpKSk7Ly9ZYWVsIDA0LzExLzIwMjUNCiAgICAgICAgZm91bmRbMF0gPSB0cnVlOw0KICAgICAgfQ0KICAgIH0pOw0KICAgIHJldHVybiBmb3VuZFswXTsNCiAgfQ0KDQogIHByaXZhdGUgdm9pZCBqb2luV2l0aEZQTEVEWChNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCwgU3RyaW5nIGNvbm8sIFN0cmluZyBwZXhuKSB7DQogICAgLyppZiAoISI1MCIuZXF1YWxzKHJlY29yZC5nZXQoIlRSQ0QiKSkpIHsNCiAgICAgIHJldHVybjsNCiAgICB9Ki8vL1lhZWwuIDA2LjExLjIwMjUNCiAgICBTdHJpbmcgZGl2aSA9IHJlY29yZC5nZXQoIkRJVkkiKTsNCiAgICBTdHJpbmcgeWVhNCA9IHJlY29yZC5nZXQoIllFQTQiKTsNCiAgICBTdHJpbmcganJubyA9IHJlY29yZC5nZXQoIkpSTk8iKTsNCiAgICBTdHJpbmcganNubyA9IHJlY29yZC5nZXQoIkpTTk8iKTsNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBmcGxlZHhFeHAgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURYIikNCiAgICAgIC5lcSgiRVBDT05PIiwgY29ubykNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVEWCIpLmVxKCJFUERJVkkiLCBkaXZpKSkNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVEWCIpLmVxKCJFUFlFQTQiLCB5ZWE0KSkNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVEWCIpLmVxKCJFUEpSTk8iLCBqcm5vKSkNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVEWCIpLmVxKCJFUEpTTk8iLCBqc25vKSkNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVEWCIpLmVxKCJFUFBFWE4iLCBwZXhuKSk7DQogICAgREJBY3Rpb24gZnBsZWR4UXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRlBMRURYIikNCiAgICAgIC5pbmRleCgiMDAiKQ0KICAgICAgLm1hdGNoaW5nKGZwbGVkeEV4cCkNCiAgICAgIC5zZWxlY3Rpb24oIkVQUEVYSSIpDQogICAgICAuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBmcGxlZHhDb250YWluZXIgPSBmcGxlZHhRdWVyeS5nZXRDb250YWluZXIoKTsNCiAgICBmcGxlZHhRdWVyeS5yZWFkQWxsKGZwbGVkeENvbnRhaW5lciwgMCwgeyBEQkNvbnRhaW5lciB4UmVjb3JkIC0+DQogICAgICBTdHJpbmcgcGV4aSA9IFN0cmluZy52YWx1ZU9mKHhSZWNvcmQuZ2V0KCJFUFBFWEkiKSkudHJpbSgpOy8vWWFlbCBhZGQgdHJpbSgpLiAwNi4xMS4yMDI1DQogICAgICBpZiAoIjQwOSIuZXF1YWxzKHBleG4pKSB7DQogICAgICAgIGlmIChwZXhpLmxlbmd0aCgpID4gMTApIHsNCiAgICAgICAgICByZWNvcmQucHV0KCJSTVNWIiwgcGV4aS5zdWJzdHJpbmcocGV4aS5sZW5ndGgoKSAtIDEwKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmVjb3JkLnB1dCgiUk1TViIsIHBleGkpOw0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKCI0MDYiLmVxdWFscyhwZXhuKSkgew0KICAgICAgICByZWNvcmQucHV0KCJQTVNWIiwgcGV4aSk7DQogICAgICB9IGVsc2UgaWYgKCI0NTAiLmVxdWFscyhwZXhuKSkgew0KICAgICAgICBpZiAocGV4aS5sZW5ndGgoKSA+IDEwKSB7DQogICAgICAgICAgcmVjb3JkLnB1dCgiUk1TViIsIHBleGkuc3Vic3RyaW5nKHBleGkubGVuZ3RoKCkgLSAxMCkpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlY29yZC5wdXQoIlJNU1YiLCBwZXhpKTsNCiAgICAgICAgfQ0KICAgICAgfWVsc2UgaWYoIjQwNCIuZXF1YWxzKHBleG4pKXsvL1lhZWwgMDQvMTEvMjAyNS4NCiAgICAgICAgIGlmIChwZXhpLmxlbmd0aCgpID4gMTApIHsNCiAgICAgICAgICAgcmVjb3JkLnB1dCgiQ0hLTiIsIHBleGkuc3Vic3RyaW5nKHBleGkubGVuZ3RoKCkgLSAxMCkpOw0KICAgICAgICAgfWVsc2V7DQogICAgICAgICAgIHJlY29yZC5wdXQoIkNIS04iLCBwZXhpKTsNCiAgICAgICAgIH0NCiAgICAgIH0NCiAgICB9KTsNCiAgfQ0KDQogIHByaXZhdGUgdm9pZCBqb2luV2l0aENTWU5CVihNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCwgU3RyaW5nIGNvbm8pIHsNCiAgICBTdHJpbmcgZGl2aSA9IHJlY29yZC5nZXQoIkRJVkkiKTsNCiAgICBTdHJpbmcgdnNlciA9IHJlY29yZC5nZXQoIlZTRVIiKTsNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBjc3luYnZFeHAgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ1NZTkJWIikNCiAgICAgIC5lcSgiRFZDT05PIiwgY29ubykNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkNTWU5CViIpLmVxKCJEVkRJVkkiLCBkaXZpKSkNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkNTWU5CViIpLmVxKCJEVlZTRVIiLCB2c2VyKSk7DQogICAgREJBY3Rpb24gY3N5bmJ2UXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ1NZTkJWIikNCiAgICAgIC5tYXRjaGluZyhjc3luYnZFeHApDQogICAgICAuc2VsZWN0aW9uKCJEVlRYMTUiKQ0KICAgICAgLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY3N5bmJ2Q29udGFpbmVyID0gY3N5bmJ2UXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgY3N5bmJ2UXVlcnkucmVhZEFsbChjc3luYnZDb250YWluZXIsIDAsIHsgREJDb250YWluZXIgY1JlY29yZCAtPg0KICAgICAgcmVjb3JkLnB1dCgiVFgxNSIsIFN0cmluZy52YWx1ZU9mKGNSZWNvcmQuZ2V0KCJEVlRYMTUiKSkpOw0KICAgIH0pOw0KICB9DQoNCiAgLypwcml2YXRlIHZvaWQgam9pbldpdGhGQVBDSEsoTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQsIFN0cmluZyBjb25vKSB7DQogICAgU3RyaW5nIGRpdmkgPSByZWNvcmQuZ2V0KCJESVZJIik7DQogICAgU3RyaW5nIHZzZXIgPSByZWNvcmQuZ2V0KCJWU0VSIik7DQogICAgU3RyaW5nIHZvbm8gPSByZWNvcmQuZ2V0KCJWT05PIik7DQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZmFwY2hrRXhwID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZBUENISyIpDQogICAgICAuZXEoIkNLQ09OTyIsIGNvbm8pDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGQVBDSEsiKS5lcSgiQ0tESVZJIiwgZGl2aSkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGQVBDSEsiKS5lcSgiQ0tWU0VSIiwgdnNlcikpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGQVBDSEsiKS5lcSgiQ0tWT05PIiwgdm9ubykpOw0KICAgIERCQWN0aW9uIGZhcGNoa1F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkZBUENISyIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5tYXRjaGluZyhmYXBjaGtFeHApDQogICAgICAuc2VsZWN0aW9uKCJDS0NIS04iKQ0KICAgICAgLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgZmFwY2hrQ29udGFpbmVyID0gZmFwY2hrUXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgZmFwY2hrUXVlcnkucmVhZEFsbChmYXBjaGtDb250YWluZXIsIDAsIHsgREJDb250YWluZXIgY1JlY29yZCAtPg0KICAgICAgU3RyaW5nIGNoa24gPSBTdHJpbmcudmFsdWVPZihjUmVjb3JkLmdldCgiQ0tDSEtOIikpOw0KICAgICAgaWYgKGNoa24gIT0gbnVsbCAmJiAhY2hrbi50cmltKCkuaXNFbXB0eSgpICYmICEibnVsbCIuZXF1YWxzKGNoa24pKSB7DQogICAgICAgIHJlY29yZC5wdXQoIkNIS04iLCBjaGtuKTsNCiAgICAgIH0NCiAgICB9KTsNCiAgfSovLy9ZYWVsIDA0LzExLzIwMjUNCiAgDQogIC8qcHJpdmF0ZSB2b2lkIGpvaW5XaXRoQ1NZVEFCKE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkLCBTdHJpbmcgY29ubywgU3RyaW5nIHN1bm9QYXJhbSkgew0KICAgIFN0cmluZyBmZWlkID0gcmVjb3JkLmdldCgiRkVJRCIpOw0KICAgIFN0cmluZyBmbmNuID0gcmVjb3JkLmdldCgiRk5DTiIpOw0KICAgIGlmIChmbmNuLmxlbmd0aCgpIDwgMykgew0KICAgICAgZm5jbiA9IFN0cmluZy5mb3JtYXQoIiUwM2QiLCBJbnRlZ2VyLnBhcnNlSW50KGZuY24pKTsNCiAgICB9DQogICAgU3RyaW5nIGRpdmkgPSByZWNvcmQuZ2V0KCJESVZJIik7DQogICAgaWYgKGZlaWQgPT0gbnVsbCB8fCBmZWlkLmlzRW1wdHkoKSB8fCBmbmNuID09IG51bGwgfHwgZm5jbi5pc0VtcHR5KCkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBTdHJpbmcgc3RreSA9IGZlaWQgKyBmbmNuOw0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGNzeXRhYkV4cCA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJDU1lUQUIiKS5lcSgiQ1RDT05PIiwgY29ubykNCiAgICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ1NZVEFCIikuZXEoIkNURElWSSIsIGRpdmkpKQ0KICAgICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJDU1lUQUIiKS5lcSgiQ1RTVENPIiwgIkZGTkMiKSkNCiAgICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ1NZVEFCIikuZXEoIkNUU1RLWSIsIHN0a3kpKTsNCiAgICBEQkFjdGlvbiBjc3l0YWJRdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJDU1lUQUIiKQ0KICAgICAgICAubWF0Y2hpbmcoY3N5dGFiRXhwKQ0KICAgICAgICAuc2VsZWN0aW9uKCJDVFRYNDAiKQ0KICAgICAgICAuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjc3l0YWJDb250YWluZXIgPSBjc3l0YWJRdWVyeS5nZXRDb250YWluZXIoKTsNCiAgICBjc3l0YWJRdWVyeS5yZWFkQWxsKGNzeXRhYkNvbnRhaW5lciwgMCwgeyBEQkNvbnRhaW5lciBjc1JlY29yZCAtPg0KICAgICAgICBTdHJpbmcgdHg0MCA9IFN0cmluZy52YWx1ZU9mKGNzUmVjb3JkLmdldCgiQ1RUWDQwIikpOw0KICAgICAgICBpZiAodHg0MCAhPSBudWxsICYmICF0eDQwLnRyaW0oKS5pc0VtcHR5KCkgJiYgISJudWxsIi5lcXVhbHModHg0MCkpIHsNCiAgICAgICAgICAgIHJlY29yZC5wdXQoIlRYNDAiLCB0eDQwKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KICB9Ki8vL1lhZWwgMDQvMTEvMjAyNQ0KDQogIHByaXZhdGUgdm9pZCBjYWxjdWxhdGVEZWJpdENyZWRpdChNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCkgew0KICAgIFN0cmluZyBkYmNyID0gcmVjb3JkLmdldCgiREJDUiIpOw0KICAgIFN0cmluZyBjdWFtID0gcmVjb3JkLmdldCgiQ1VBTSIpOw0KICAgIA0KICAgIC8vIEhhbmRsZSBudWxscyBhbmQgcGFyc2Ugc2FmZWx5DQogICAgZG91YmxlIGN1YW1Eb3VibGUgPSAwLjA7DQogICAgaWYgKGN1YW0gIT0gbnVsbCAmJiAhY3VhbS5pc0VtcHR5KCkpIHsNCiAgICAgICAgY3VhbURvdWJsZSA9IERvdWJsZS5wYXJzZURvdWJsZShjdWFtKTsNCiAgICB9Ly9ZYWVsLiAwNi4xMS4yMDI1DQogICAgDQogICAgaWYgKCJEIi5lcXVhbHMoZGJjcikpIHsNCiAgICAgIC8vcmVjb3JkLnB1dCgiREJJVCIsIGN1YW0pOw0KICAgICAgIHJlY29yZC5wdXQoIkRCSVQiLCBTdHJpbmcuZm9ybWF0KCIlLjJmIiwgY3VhbURvdWJsZSkpOy8vWWFlbC4gMDYuMTEuMjAyNQ0KICAgICAgcmVjb3JkLnB1dCgiQ0RJVCIsICIwLjAwIik7DQogICAgfSBlbHNlIGlmICgiQyIuZXF1YWxzKGRiY3IpKSB7DQogICAgICByZWNvcmQucHV0KCJEQklUIiwgIjAuMDAiKTsNCiAgICAgIC8vcmVjb3JkLnB1dCgiQ0RJVCIsIGN1YW0pOw0KICAgICAgcmVjb3JkLnB1dCgiQ0RJVCIsIFN0cmluZy5mb3JtYXQoIiUuMmYiLCBjdWFtRG91YmxlICogLTEpKTsvL1lhZWwuIDA2LjExLjIwMjUNCiAgICB9DQogIH0NCg0KICBwcml2YXRlIGJvb2xlYW4gc2hvdWxkU3dhcChNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZDEsIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkMikgew0KICAgIFN0cmluZyBzcHluMSA9IHJlY29yZDEuZ2V0KCJTUFlOIik7DQogICAgU3RyaW5nIHNweW4yID0gcmVjb3JkMi5nZXQoIlNQWU4iKTsNCiAgICBpbnQgc3B5bkNvbXBhcmUgPSBzcHluMS5jb21wYXJlVG8oc3B5bjIpOw0KICAgIGlmIChzcHluQ29tcGFyZSAhPSAwKSB7DQogICAgICByZXR1cm4gc3B5bkNvbXBhcmUgPiAwOw0KICAgIH0NCiAgICBpbnQgYWNkdDEgPSBJbnRlZ2VyLnBhcnNlSW50KHJlY29yZDEuZ2V0KCJBQ0RUIikpOw0KICAgIGludCBhY2R0MiA9IEludGVnZXIucGFyc2VJbnQocmVjb3JkMi5nZXQoIkFDRFQiKSk7DQogICAgaWYgKGFjZHQxICE9IGFjZHQyKSB7DQogICAgICByZXR1cm4gYWNkdDEgPiBhY2R0MjsNCiAgICB9DQogICAgU3RyaW5nIHZvbm8xID0gcmVjb3JkMS5nZXQoIlZPTk8iKTsNCiAgICBTdHJpbmcgdm9ubzIgPSByZWNvcmQyLmdldCgiVk9OTyIpOw0KICAgIHJldHVybiB2b25vMS5jb21wYXJlVG8odm9ubzIpID4gMDsNCiAgfQ0KICANCiAgcHJpdmF0ZSBNYXA8U3RyaW5nLCBTdHJpbmc+IGNyZWF0ZVN1bW1hcnlSZWNvcmQoTWFwPFN0cmluZywgU3RyaW5nPiBiYXNlUmVjb3JkKSB7DQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBzdW1tYXJ5UmVjb3JkID0gbmV3IEhhc2hNYXA8PihiYXNlUmVjb3JkKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiVk9OTyIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiU0lOTyIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiQ0hLTiIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiUk1TViIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiUE1TViIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiQUNEVCIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiRFVEVCIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiVFJDRCIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiRkVJRCIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiRk5DTiIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiQVNNMSIsICIiKTsNCiAgICBzdW1tYXJ5UmVjb3JkLnB1dCgiQVNNMiIsICIiKTsgDQogICAgcmV0dXJuIHN1bW1hcnlSZWNvcmQ7DQogIH0NCiAgDQogIHByaXZhdGUgdm9pZCBvdXRwdXRSZWNvcmQoTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQpIHsNCiAgICBtaS5vdXREYXRhLnB1dCgiRElWSSIsIHJlY29yZC5nZXQoIkRJVkkiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIlNQWU4iLCByZWNvcmQuZ2V0KCJTUFlOIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJTVU5PIiwgcmVjb3JkLmdldCgiU1VOTyIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiU0lOTyIsIHJlY29yZC5nZXQoIlNJTk8iKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIlZTRVIiLCByZWNvcmQuZ2V0KCJWU0VSIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJWT05PIiwgcmVjb3JkLmdldCgiVk9OTyIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiQUNEVCIsIHJlY29yZC5nZXQoIkFDRFQiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkRVRFQiLCByZWNvcmQuZ2V0KCJEVURUIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJDVUFNIiwgcmVjb3JkLmdldCgiQ1VBTSIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiREJDUiIsIHJlY29yZC5nZXQoIkRCQ1IiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkNVQ0QiLCByZWNvcmQuZ2V0KCJDVUNEIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJSTVNWIiwgcmVjb3JkLmdldCgiUk1TViIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiUE1TViIsIHJlY29yZC5nZXQoIlBNU1YiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkNIS04iLCBzdHJpcExlYWRpbmdaZXJvcyhyZWNvcmQuZ2V0KCJDSEtOIikpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiVFJDRCIsIHJlY29yZC5nZXQoIlRSQ0QiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkZFSUQiLCByZWNvcmQuZ2V0KCJGRUlEIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJGTkNOIiwgcmVjb3JkLmdldCgiRk5DTiIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiVlRYVCIsIHJlY29yZC5nZXQoIlZUWFQiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkFDQU0iLCByZWNvcmQuZ2V0KCJBQ0FNIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJUQ0FNIiwgcmVjb3JkLmdldCgiVENBTSIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiVFgxNSIsIHJlY29yZC5nZXQoIlRYMTUiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkRCSVQiLCByZWNvcmQuZ2V0KCJEQklUIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJDRElUIiwgcmVjb3JkLmdldCgiQ0RJVCIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiTEFCTCIsIHJlY29yZC5nZXQoIkxBQkwiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIklWVFAiLCByZWNvcmQuZ2V0KCJJVlRQIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJCTE5DIiwgcmVjb3JkLmdldCgiQkxOQyIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiQVNNMSIsIHJlY29yZC5nZXQoIkFTTTEiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkFTTTIiLCByZWNvcmQuZ2V0KCJBU00yIikpOw0KICAgIC8vbWkub3V0RGF0YS5wdXQoIlRYNDAiLCByZWNvcmQuZ2V0KCJUWDQwIikpOy8vWWFlbCAwNC8xMS8yMDI1DQogICAgbWkub3V0RGF0YS5wdXQoIklWRFQiLCByZWNvcmQuZ2V0KCJJVkRUIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJWRFNDIiwgcmVjb3JkLmdldCgiVkRTQyIpKTsNCiAgICBtaS53cml0ZSgpOw0KICB9DQogIA0KICBwcml2YXRlIFN0cmluZyBzdHJpcExlYWRpbmdaZXJvcyhTdHJpbmcgdmFsdWUpIHsNCiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIG51bGwNCiAgICByZXR1cm4gdmFsdWUucmVwbGFjZUZpcnN0KCdeMCsoPyEkKScsICcnKQ0KICB9DQogIA0KICBwcml2YXRlIGRvdWJsZSBwYXJzZUFtb3VudChTdHJpbmcgYW1vdW50KSB7DQogICAgdHJ5IHsNCiAgICAgIHJldHVybiBEb3VibGUucGFyc2VEb3VibGUoYW1vdW50KTsNCiAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkgew0KICAgICAgcmV0dXJuIDAuMDsNCiAgICB9DQogIH0NCg0KICBwcml2YXRlIGludCBnZXRUb2RheSgpIHsNCiAgICBMb2NhbERhdGUgdG9kYXkgPSBMb2NhbERhdGUubm93KCk7DQogICAgRGF0ZVRpbWVGb3JtYXR0ZXIgZm9ybWF0dGVyID0gRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpOw0KICAgIHJldHVybiBJbnRlZ2VyLnBhcnNlSW50KHRvZGF5LmZvcm1hdChmb3JtYXR0ZXIpKTsNCiAgfQ0KDQogIHByaXZhdGUgU3RyaW5nIGZvcm1hdEFtb3VudChkb3VibGUgYW1vdW50KSB7DQogICAgcmV0dXJuIFN0cmluZy5mb3JtYXQoIiUuMmYiLCBhbW91bnQpOw0KICB9DQogIA0KICBwcml2YXRlIHZvaWQgYnViYmxlU29ydCgpIHsNCiAgICBpbnQgbiA9IHJlc3VsdFJlY29yZHMuc2l6ZSgpOw0KICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKykgew0KICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuIC0gaSAtIDE7IGorKykgew0KICAgICAgICBpZiAoc2hvdWxkU3dhcChyZXN1bHRSZWNvcmRzLmdldChqKSwgcmVzdWx0UmVjb3Jkcy5nZXQoaiArIDEpKSkgew0KICAgICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gdGVtcCA9IHJlc3VsdFJlY29yZHMuZ2V0KGopOw0KICAgICAgICAgIHJlc3VsdFJlY29yZHMuc2V0KGosIHJlc3VsdFJlY29yZHMuZ2V0KGogKyAxKSk7DQogICAgICAgICAgcmVzdWx0UmVjb3Jkcy5zZXQoaiArIDEsIHRlbXApOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQogIA0KICBwcml2YXRlIHZvaWQgb3V0cHV0UmVzdWx0cygpIHsNCiAgICBpZiAocmVzdWx0UmVjb3Jkcy5pc0VtcHR5KCkpIHsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgTWFwPFN0cmluZywgTWFwPFN0cmluZywgTGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+Pj4+IGdyb3VwZWREYXRhID0gbmV3IExpbmtlZEhhc2hNYXA8PigpOw0KICAgIGZvciAoTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQgOiByZXN1bHRSZWNvcmRzKSB7DQogICAgICBTdHJpbmcgc3B5biA9IHJlY29yZC5nZXQoIlNQWU4iKTsNCiAgICAgIFN0cmluZyBzdW5vID0gcmVjb3JkLmdldCgiU1VOTyIpOw0KICAgICAgZ3JvdXBlZERhdGEuY29tcHV0ZUlmQWJzZW50KHNweW4sIHtrIC0+IG5ldyBMaW5rZWRIYXNoTWFwPD4oKX0pDQogICAgICAgICAgICAgICAgIC5jb21wdXRlSWZBYnNlbnQoc3Vubywge2sgLT4gbmV3IEFycmF5TGlzdDw+KCl9KQ0KICAgICAgICAgICAgICAgICAuYWRkKHJlY29yZCk7DQogICAgfQ0KICAgIA0KICAgIGZvciAoU3RyaW5nIHNweW4gOiBncm91cGVkRGF0YS5rZXlTZXQoKSkgew0KICAgICAgTWFwPFN0cmluZywgTGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+Pj4gc3Vub0dyb3VwcyA9IGdyb3VwZWREYXRhLmdldChzcHluKTsNCiAgICAgIGRvdWJsZSBzcHluVG90YWxEZWJpdCA9IDAuMDsNCiAgICAgIGRvdWJsZSBzcHluVG90YWxDcmVkaXQgPSAwLjA7DQogICAgICBmb3IgKFN0cmluZyBzdW5vIDogc3Vub0dyb3Vwcy5rZXlTZXQoKSkgew0KICAgICAgICBMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IHRyYW5zYWN0aW9ucyA9IHN1bm9Hcm91cHMuZ2V0KHN1bm8pOw0KICAgICAgICBpZiAodHJhbnNhY3Rpb25zLmlzRW1wdHkoKSkgY29udGludWU7DQogICAgICAgIFN0cmluZyBrZXkgPSBzcHluICsgIl8iICsgc3VubzsNCiAgICAgICAgZG91YmxlIHJ1bm5pbmdCYWxhbmNlID0gb3BlbmluZ0JhbGFuY2VzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpOw0KICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG9wZW5pbmdSZWNvcmQgPSBjcmVhdGVPcGVuaW5nQmFsYW5jZVJlY29yZCh0cmFuc2FjdGlvbnMuZ2V0KDApLCBydW5uaW5nQmFsYW5jZSk7DQogICAgICAgIG9wZW5pbmdSZWNvcmQucHV0KCJMQUJMIiwgIk9QRU5JTkdfQkFMQU5DRSIpOw0KICAgICAgICBvcGVuaW5nUmVjb3JkLnB1dCgiQkxOQyIsIGZvcm1hdEFtb3VudChydW5uaW5nQmFsYW5jZSkpOw0KICAgICAgICBvdXRwdXRSZWNvcmQob3BlbmluZ1JlY29yZCk7DQogICAgICAgIGRvdWJsZSB0cmFuc2FjdGlvbkRlYml0VG90YWwgPSAwLjA7DQogICAgICAgIGRvdWJsZSB0cmFuc2FjdGlvbkNyZWRpdFRvdGFsID0gMC4wOw0KICAgICAgICBmb3IgKE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkIDogdHJhbnNhY3Rpb25zKSB7DQogICAgICAgICAgcmVjb3JkLnB1dCgiTEFCTCIsICJUUkFOU0FDVElPTiIpOw0KICAgICAgICAgIGRvdWJsZSBkZWJpdCA9IHBhcnNlQW1vdW50KHJlY29yZC5nZXQoIkRCSVQiKSk7DQogICAgICAgICAgZG91YmxlIGNyZWRpdCA9IHBhcnNlQW1vdW50KHJlY29yZC5nZXQoIkNESVQiKSk7DQogICAgICAgICAgcnVubmluZ0JhbGFuY2UgPSBydW5uaW5nQmFsYW5jZSArIGRlYml0IC0gY3JlZGl0Ow0KICAgICAgICAgIHJlY29yZC5wdXQoIkJMTkMiLCBmb3JtYXRBbW91bnQocnVubmluZ0JhbGFuY2UpKTsgDQogICAgICAgICAgdHJhbnNhY3Rpb25EZWJpdFRvdGFsICs9IGRlYml0Ow0KICAgICAgICAgIHRyYW5zYWN0aW9uQ3JlZGl0VG90YWwgKz0gY3JlZGl0Ow0KICAgICAgICAgIG91dHB1dFJlY29yZChyZWNvcmQpOw0KICAgICAgICB9DQogICAgICAgIGRvdWJsZSBvcGVuaW5nRGViaXQgPSBvcGVuaW5nRGViaXRzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpOw0KICAgICAgICBkb3VibGUgb3BlbmluZ0NyZWRpdCA9IG9wZW5pbmdDcmVkaXRzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpOw0KICAgICAgICBkb3VibGUgdG90YWxEZWJpdCA9IG9wZW5pbmdEZWJpdCArIHRyYW5zYWN0aW9uRGViaXRUb3RhbDsNCiAgICAgICAgZG91YmxlIHRvdGFsQ3JlZGl0ID0gb3BlbmluZ0NyZWRpdCArIHRyYW5zYWN0aW9uQ3JlZGl0VG90YWw7DQogICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gY2xvc2luZ1JlY29yZCA9IGNyZWF0ZVN1bW1hcnlSZWNvcmQodHJhbnNhY3Rpb25zLmdldCh0cmFuc2FjdGlvbnMuc2l6ZSgpIC0gMSkpOw0KICAgICAgICBjbG9zaW5nUmVjb3JkLnB1dCgiREJJVCIsIGZvcm1hdEFtb3VudCh0b3RhbERlYml0KSk7ICAgICAgICAgICAgIA0KICAgICAgICBjbG9zaW5nUmVjb3JkLnB1dCgiQ0RJVCIsIGZvcm1hdEFtb3VudCh0b3RhbENyZWRpdCkpOyAgICAgICAgICAgICAgDQogICAgICAgIGNsb3NpbmdSZWNvcmQucHV0KCJDVUFNIiwgZm9ybWF0QW1vdW50KE1hdGguYWJzKHRvdGFsRGViaXQgLSB0b3RhbENyZWRpdCkpKTsNCiAgICAgICAgY2xvc2luZ1JlY29yZC5wdXQoIkJMTkMiLCBmb3JtYXRBbW91bnQocnVubmluZ0JhbGFuY2UpKTsgICAgICAgICAgICAgIA0KICAgICAgICBjbG9zaW5nUmVjb3JkLnB1dCgiVlRYVCIsICJDbG9zaW5nIEJhbGFuY2UiKTsNCiAgICAgICAgY2xvc2luZ1JlY29yZC5wdXQoIkxBQkwiLCAiQ0xPU0lOR19CQUxBTkNFIik7DQogICAgICAgIG91dHB1dFJlY29yZChjbG9zaW5nUmVjb3JkKTsNCiAgICAgICAgaWYgKHN1bm9Hcm91cHMuc2l6ZSgpID4gMSkgew0KICAgICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gc3Vub1N1bW1hcnkgPSBjcmVhdGVTdW1tYXJ5UmVjb3JkKHRyYW5zYWN0aW9ucy5nZXQoMCkpOw0KICAgICAgICAgIHN1bm9TdW1tYXJ5LnB1dCgiREJJVCIsIGZvcm1hdEFtb3VudCh0b3RhbERlYml0KSk7DQogICAgICAgICAgc3Vub1N1bW1hcnkucHV0KCJDRElUIiwgZm9ybWF0QW1vdW50KHRvdGFsQ3JlZGl0KSk7DQogICAgICAgICAgc3Vub1N1bW1hcnkucHV0KCJDVUFNIiwgZm9ybWF0QW1vdW50KE1hdGguYWJzKHRvdGFsRGViaXQgLSB0b3RhbENyZWRpdCkpKTsNCiAgICAgICAgICBzdW5vU3VtbWFyeS5wdXQoIkJMTkMiLCBmb3JtYXRBbW91bnQocnVubmluZ0JhbGFuY2UpKTsNCiAgICAgICAgICBzdW5vU3VtbWFyeS5wdXQoIlZUWFQiLCAiVG90YWwgZm9yIHN1cHBsaWVyICIgKyBzdW5vKTsNCiAgICAgICAgICBzdW5vU3VtbWFyeS5wdXQoIkxBQkwiLCAiU1VQUExJRVJfVE9UQUwiKTsNCiAgICAgICAgICBvdXRwdXRSZWNvcmQoc3Vub1N1bW1hcnkpOw0KICAgICAgICB9DQogICAgICAgIHNweW5Ub3RhbERlYml0ICs9IHRvdGFsRGViaXQNCiAgICAgICAgc3B5blRvdGFsQ3JlZGl0ICs9IHRvdGFsQ3JlZGl0OyANCiAgICAgIH0NCiAgICAgIGlmIChncm91cGVkRGF0YS5zaXplKCkgPiAxKSB7DQogICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gc3B5blN1bW1hcnkgPSBjcmVhdGVTdW1tYXJ5UmVjb3JkKA0KICAgICAgICAgIGdyb3VwZWREYXRhLmdldChzcHluKS52YWx1ZXMoKS5pdGVyYXRvcigpLm5leHQoKS5nZXQoMCkNCiAgICAgICAgKTsNCiAgICAgICAgc3B5blN1bW1hcnkucHV0KCJEQklUIiwgZm9ybWF0QW1vdW50KHNweW5Ub3RhbERlYml0KSk7DQogICAgICAgIHNweW5TdW1tYXJ5LnB1dCgiQ0RJVCIsIGZvcm1hdEFtb3VudChzcHluVG90YWxDcmVkaXQpKTsNCiAgICAgICAgc3B5blN1bW1hcnkucHV0KCJDVUFNIiwgZm9ybWF0QW1vdW50KE1hdGguYWJzKHNweW5Ub3RhbERlYml0IC0gc3B5blRvdGFsQ3JlZGl0KSkpOw0KICAgICAgICBzcHluU3VtbWFyeS5wdXQoIlZUWFQiLCAiVG90YWwgZm9yIGJlbmVmaWNpYXJ5ICIgKyBzcHluKTsNCiAgICAgICAgc3B5blN1bW1hcnkucHV0KCJMQUJMIiwgIkJFTkVGSUNJQVJZX1RPVEFMIik7DQogICAgICAgIG91dHB1dFJlY29yZChzcHluU3VtbWFyeSk7DQogICAgICB9DQogICAgfQ0KICB9DQogIA0KICBwcml2YXRlIE1hcDxTdHJpbmcsIFN0cmluZz4gY3JlYXRlT3BlbmluZ0JhbGFuY2VSZWNvcmQoTWFwPFN0cmluZywgU3RyaW5nPiBiYXNlUmVjb3JkLCBkb3VibGUgYmFsYW5jZSkgew0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gb3BlbmluZ1JlY29yZCA9IG5ldyBIYXNoTWFwPD4oYmFzZVJlY29yZCk7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlZPTk8iLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlNJTk8iLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkNIS04iLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlJNU1YiLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlBNU1YiLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkFDRFQiLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkRVRFQiLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlZUWFQiLCAiT3BlbmluZyBCYWxhbmNlIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkFTTTEiLCAiIik7IA0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJBU00yIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJUUkNEIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJGRUlEIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJGTkNOIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJBQ0FNIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJUQ0FNIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJUWDE1IiwgIiIpOw0KICAgIFN0cmluZyBzcHluID0gYmFzZVJlY29yZC5nZXQoIlNQWU4iKTsNCiAgICBTdHJpbmcgc3VubyA9IGJhc2VSZWNvcmQuZ2V0KCJTVU5PIik7DQogICAgU3RyaW5nIGtleSA9IHNweW4gKyAiXyIgKyBzdW5vOw0KICAgIGRvdWJsZSB0b3RhbERlYml0ID0gb3BlbmluZ0RlYml0cy5nZXRPckRlZmF1bHQoa2V5LCAwLjBkKTsNCiAgICBkb3VibGUgdG90YWxDcmVkaXQgPSBvcGVuaW5nQ3JlZGl0cy5nZXRPckRlZmF1bHQoa2V5LCAwLjBkKTsNCiAgICBvcGVuaW5nUmVjb3JkLnB1dCgiREJJVCIsIGZvcm1hdEFtb3VudCh0b3RhbERlYml0KSk7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkNESVQiLCBmb3JtYXRBbW91bnQodG90YWxDcmVkaXQpKTsNCiAgICBpZiAoYmFsYW5jZSA+PSAwKSB7DQogICAgICBvcGVuaW5nUmVjb3JkLnB1dCgiREJDUiIsICJEIik7DQogICAgfSBlbHNlIHsNCiAgICAgIG9wZW5pbmdSZWNvcmQucHV0KCJEQkNSIiwgIkMiKTsNCiAgICB9DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkNVQU0iLCBmb3JtYXRBbW91bnQoTWF0aC5hYnMoYmFsYW5jZSkpKTsNCiAgICByZXR1cm4gb3BlbmluZ1JlY29yZDsNCiAgfQ0KICAgIA0KICBwcml2YXRlIHZvaWQgc2V0QXNtYWtodGFWYWx1ZXMoTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQpIHsNCiAgICBTdHJpbmcgY2hrbiA9IHJlY29yZC5nZXQoIkNIS04iKTsNCiAgICBTdHJpbmcgcG1zdiA9IHJlY29yZC5nZXQoIlBNU1YiKTsgICAgICAgDQogICAgU3RyaW5nIHJtc3YgPSByZWNvcmQuZ2V0KCJSTVNWIik7DQogICAgU3RyaW5nIG9yaWdpbmFsU2lubyA9IHJlY29yZC5nZXQoIlNJTk8iKTsgDQogICAgLy9ZYWVsLiAxOC8xMS8yMDI1DQogICAgU3RyaW5nIGZlaWQgPSByZWNvcmQuZ2V0KCJGRUlEIik7DQogICAgaWYoZmVpZCAhPSAiQVA1MCIgJiYgZmVpZCAhPSAiQVAxMCIpew0KICAgICAgaWYgKGNoa24gIT0gbnVsbCAmJiAhY2hrbi50cmltKCkuaXNFbXB0eSgpICYmICEibnVsbCIuZXF1YWxzKGNoa24pKSB7DQogICAgICAgICAgcmVjb3JkLnB1dCgiQVNNMSIsIHN0cmlwTGVhZGluZ1plcm9zKGNoa24pKTsNCiAgICAgIH1lbHNlIGlmIChybXN2ICE9IG51bGwgJiYgIXJtc3YudHJpbSgpLmlzRW1wdHkoKSAmJiAhIm51bGwiLmVxdWFscyhybXN2KSkgew0KICAgICAgICByZWNvcmQucHV0KCJBU00xIiwgcm1zdik7DQogICAgICB9IGVsc2UgaWYgKHBtc3YgIT0gbnVsbCAmJiAhcG1zdi50cmltKCkuaXNFbXB0eSgpICYmICEibnVsbCIuZXF1YWxzKHBtc3YpKSB7DQogICAgICAgIHJlY29yZC5wdXQoIkFTTTEiLCBwbXN2KTsNCiAgICAgIH0NCiAgICAgIHJlY29yZC5wdXQoIkFTTTIiLCBvcmlnaW5hbFNpbm8pOw0KICAgIH1lbHNlew0KICAgICAgaWYgKG9yaWdpbmFsU2lubyAhPSBudWxsICYmICFvcmlnaW5hbFNpbm8udHJpbSgpLmlzRW1wdHkoKSAmJiAhIm51bGwiLmVxdWFscyhvcmlnaW5hbFNpbm8pKSB7DQogICAgICAgICAgICByZWNvcmQucHV0KCJBU00xIiwgb3JpZ2luYWxTaW5vKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJlY29yZC5wdXQoIkFTTTEiLCAiIik7DQogICAgICAgIH0NCiAgICB9DQogICAgLyppZiAoY2hrbiAhPSBudWxsICYmICFjaGtuLnRyaW0oKS5pc0VtcHR5KCkgJiYgISJudWxsIi5lcXVhbHMoY2hrbikpIHsNCiAgICAgICAgcmVjb3JkLnB1dCgiQVNNMSIsIHN0cmlwTGVhZGluZ1plcm9zKGNoa24pKTsNCiAgICAgICAgcmVjb3JkLnB1dCgiQVNNMiIsIG9yaWdpbmFsU2lubyk7DQogICAgfSBlbHNlIGlmIChybXN2ICE9IG51bGwgJiYgIXJtc3YudHJpbSgpLmlzRW1wdHkoKSAmJiAhIm51bGwiLmVxdWFscyhybXN2KSkgew0KICAgICAgICByZWNvcmQucHV0KCJBU00xIiwgcm1zdik7DQogICAgICAgIHJlY29yZC5wdXQoIkFTTTIiLCBvcmlnaW5hbFNpbm8pOw0KICAgIH0gZWxzZSBpZiAocG1zdiAhPSBudWxsICYmICFwbXN2LnRyaW0oKS5pc0VtcHR5KCkgJiYgISJudWxsIi5lcXVhbHMocG1zdikpIHsNCiAgICAgICAgcmVjb3JkLnB1dCgiQVNNMSIsIHBtc3YpOw0KICAgICAgICByZWNvcmQucHV0KCJBU00yIiwgb3JpZ2luYWxTaW5vKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBpZiAob3JpZ2luYWxTaW5vICE9IG51bGwgJiYgIW9yaWdpbmFsU2luby50cmltKCkuaXNFbXB0eSgpICYmICEibnVsbCIuZXF1YWxzKG9yaWdpbmFsU2lubykpIHsNCiAgICAgICAgICAgIHJlY29yZC5wdXQoIkFTTTEiLCBvcmlnaW5hbFNpbm8pOw0KICAgICAgICAgICAgcmVjb3JkLnB1dCgiQVNNMiIsICIiKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJlY29yZC5wdXQoIkFTTTEiLCAiIik7DQogICAgICAgICAgICByZWNvcmQucHV0KCJBU00yIiwgIiIpOw0KICAgICAgICB9DQogICAgfSovDQogIH0NCn0="}}}