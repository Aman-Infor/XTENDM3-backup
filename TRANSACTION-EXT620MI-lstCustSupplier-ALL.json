{"programModules":{"EXT620MI":{"program":"EXT620MI","triggers":{},"transactions":{"lstCustSupplier":{"sourceUuid":"a070e177-813e-4d2e-8572-e7e0d6da7939","name":"lstCustSupplier","program":"EXT620MI","description":"list of Customers and Suppliers data","active":true,"multi":true,"modified":1759222993752,"modifiedBy":"EDI","outputFields":[{"name":"ACDT","description":"accounting date","length":8,"mandatory":false,"type":"D","refField":"ACDT"},{"name":"TX15","description":"name","length":15,"mandatory":false,"type":"A","refField":"TX15"},{"name":"VSER","description":"voucher number series","length":3,"mandatory":false,"type":"A","refField":"VSER"},{"name":"VONO","description":"voucher number","length":8,"mandatory":false,"type":"N","refField":"VONO"},{"name":"VTXT","description":"voucher text","length":40,"mandatory":false,"type":"A","refField":"VTXT"},{"name":"DUDT","description":"due date","length":8,"mandatory":false,"type":"D","refField":"DUDT"},{"name":"CUCD","description":"currency","length":3,"mandatory":false,"type":"A","refField":"CUCD"},{"name":"CUAM","description":"foreign currency amount","length":15,"mandatory":false,"type":"N","refField":"CUAM"},{"name":"TRCD","description":"transaction code","length":2,"mandatory":false,"type":"N","refField":"TRCD"},{"name":"FEID","description":"FAM function","length":4,"mandatory":false,"type":"A","refField":"FEID"},{"name":"FNCN","description":"FAM function","length":3,"mandatory":false,"type":"N","refField":"FNCN"},{"name":"UINO","description":"CINO\\SINO","length":24,"mandatory":false,"type":"A","refField":null},{"name":"CUCK","description":"client check","length":30,"mandatory":false,"type":"A","refField":null},{"name":"SUCK","description":"supplier check","length":30,"mandatory":false,"type":"A","refField":null},{"name":"BNKP","description":"bank page","length":8,"mandatory":false,"type":"A","refField":null},{"name":"PRPN","description":"proposal number","length":30,"mandatory":false,"type":"A","refField":null},{"name":"LCAM","description":"local amount","length":8,"mandatory":false,"type":"A","refField":null},{"name":"JRNO","description":"journal number","length":7,"mandatory":false,"type":"N","refField":"JRNO"},{"name":"JSNO","description":"journal sequence number","length":7,"mandatory":false,"type":"N","refField":"JSNO"},{"name":"YEA4","description":"year","length":4,"mandatory":false,"type":"N","refField":"YEA4"},{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A","refField":"SUNO"},{"name":"SINO","description":"supplier invoice number","length":24,"mandatory":false,"type":"A","refField":"SINO"},{"name":"IVDT","description":"invoice date","length":8,"mandatory":false,"type":"D","refField":"IVDT"},{"name":"CCHK","description":"Customer check number","length":20,"mandatory":false,"type":"A","refField":null},{"name":"SCCK","description":"Supplier check number","length":20,"mandatory":false,"type":"A","refField":null},{"name":"MASV","description":"MASAV transfer number","length":15,"mandatory":false,"type":"A","refField":null},{"name":"CHKN","description":"Check number","length":10,"mandatory":false,"type":"A","refField":null},{"name":"OPDB","description":"Opening balance – Debit","length":15,"mandatory":false,"type":"N","refField":null},{"name":"OPCR","description":"Opening balance – Credit","length":15,"mandatory":false,"type":"N","refField":null},{"name":"DEBT","description":"DEBIT","length":15,"mandatory":false,"type":"N","refField":null},{"name":"CRED","description":"Credit","length":15,"mandatory":false,"type":"N","refField":null},{"name":"RUNB","description":"Running balance","length":15,"mandatory":false,"type":"N","refField":null},{"name":"ASMA","description":"Asmakhta","length":30,"mandatory":false,"type":"A","refField":null},{"name":"SUNM","description":"supplier name","length":36,"mandatory":false,"type":"A","refField":"SUNM"},{"name":"SIDE","description":"Sup\\Cust","length":10,"mandatory":false,"type":"A","refField":null},{"name":"RTYP","description":"Row type","length":20,"mandatory":false,"type":"A","refField":null},{"name":"CUNM","description":"name","length":36,"mandatory":false,"type":"A","refField":"CUNM"}],"inputFields":[{"name":"CONO","description":"company","length":3,"mandatory":true,"type":"N","refField":"CONO"},{"name":"DIVI","description":"division","length":3,"mandatory":true,"type":"A","refField":"DIVI"},{"name":"PYNO","description":"payer","length":10,"mandatory":false,"type":"A","refField":"PYNO"},{"name":"FDAT","description":"from date","length":8,"mandatory":false,"type":"A","refField":null},{"name":"TDAT","description":"to date","length":8,"mandatory":false,"type":"A","refField":null},{"name":"CUNO","description":"customer","length":10,"mandatory":false,"type":"A","refField":"CUNO"},{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A","refField":"SUNO"},{"name":"IVDT","description":"invoice date","length":8,"mandatory":false,"type":"D","refField":"IVDT"},{"name":"SINO","description":"supplier invoice number","length":24,"mandatory":false,"type":"A","refField":"SINO"},{"name":"CUAM","description":"foreign currency amount","length":15,"mandatory":false,"type":"N","refField":"CUAM"},{"name":"SCNO","description":"supplier's customer number","length":10,"mandatory":false,"type":"A","refField":"SCNO"}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"a070e177-813e-4d2e-8572-e7e0d6da7939":{"uuid":"a070e177-813e-4d2e-8572-e7e0d6da7939","updated":1759661752768,"updatedBy":"STAS","created":1756362332169,"createdBy":"EDI","apiVersion":"0.21","beVersion":"16.0.0.20250711012901.8","language":"GROOVY","codeHash":"7E9C16B79E509F862FF7450BCE9F711D21FAA8AEB9D38B8BF7B807A34BA2114A","code":"aW1wb3J0IGphdmEudXRpbC4qDQoNCnB1YmxpYyBjbGFzcyBsc3RDdXN0U3VwcGxpZXIgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQ0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtDQoNCiAgLy8gLS0tLS0tLS0tLS0tLS0tLSBDb2x1bW5zIChhcyBjb25zdGFudHMpIC0tLS0tLS0tLS0tLS0tLS0NCiAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nW10gRlBMRURHX0ZJRUxEUyA9IFsNCiAgICAiRVBDT05PIiwiRVBESVZJIiwiRVBZRUE0IiwiRVBKUk5PIiwiRVBKU05PIiwiRVBBQ0RUIiwNCiAgICAiRVBTVU5PIiwiRVBTSU5PIiwiRVBJVkRUIiwiRVBWU0VSIiwiRVBWT05PIiwiRVBEVURUIiwiRVBDVUNEIiwNCiAgICAiRVBDVUFNIiwiRVBUUkNEIiwiRVBJVlRQIg0KICBdDQogIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1tdIEZHTEVER19GSUVMRFMgPSBbDQogICAgIkVHQ09OTyIsIkVHRElWSSIsIkVHWUVBNCIsIkVHSlJOTyIsIkVHSlNOTyIsIkVHRkVJRCIsIkVHRk5DTiIsIkVHVlRYVCIsIkVHQUNBTSINCiAgXQ0KICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBGQVBDSEtfRklFTERTX1NBRkUgPSAgWw0KICAgICJDS0NPTk8iLCJDS0RJVkkiLCJDS1ZTRVIiLCJDS1ZPTk8iLCJDS0NIS04iDQogIF0NCiAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nW10gQ1NZTkJWX0ZJRUxEUyA9IFsNCiAgICAiRFZDT05PIiwiRFZESVZJIiwiRFZWU0VSIiwiRFZUWDE1Ig0KICBdDQogIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1tdIEZQTEVEWF9GSUVMRFMgPSBbDQogICAgIkVQQ09OTyIsIkVQRElWSSIsIkVQWUVBNCIsIkVQSlJOTyIsIkVQSlNOTyIsIkVQUEVYTiIsIkVQUEVYSSINCiAgXQ0KICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBGU0xFREdfRklFTERTID0gWw0KICAgICJFU0NPTk8iLCJFU0RJVkkiLCJFU1lFQTQiLCJFU0pSTk8iLCJFU0pTTk8iLCJFU0FDRFQiLA0KICAgICJFU1BZTk8iLCJFU0NJTk8iLCJFU0lWRFQiLCJFU1ZTRVIiLCJFU1ZPTk8iLCJFU0RVRFQiLCJFU0NVQ0QiLA0KICAgICJFU0NVQU0iLCJFU0lWVFAiLCJFU1RSQ0QiLCJFU1BZUlMiDQogIF0NCiAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nW10gRlNMRURYX0ZJRUxEUyA9IFsNCiAgICAiU0VDT05PIiwiU0VESVZJIiwiU0VZRUE0IiwiU0VKUk5PIiwiU0VKU05PIiwiU0VYTiIsIlNFWEkiDQogIF0NCiAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nW10gT0NVU01BX0ZJRUxEUyA9IFsNCiAgICAiT0tDT05PIiwiT0tDVU5PIiwiT0tDVU5NIg0KICBdDQogIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1tdIENJRE1BU19GSUVMRFMgPSBbDQogICAgIklEQ09OTyIsIklEU1VOTyIsIklEU1VOTSINCiAgXQ0KDQogIC8vIC0tLS0tLS0tLS0tLS0tLS0gSW5wdXRzIC0tLS0tLS0tLS0tLS0tLS0NCiAgcHJpdmF0ZSBpbnQgICAgQ09OTw0KICBwcml2YXRlIFN0cmluZyBESVZJLCBTVU5PLCBTQ05PLCBDVU5PLCBQWU5PDQogIHByaXZhdGUgaW50ICAgIEZEQVQsIFREQVQNCg0KICAvLyBydW5uaW5nIGJhbGFuY2UgYWNjdW11bGF0b3JzDQogIHByaXZhdGUgZG91YmxlIG9wZW5pbmcgPSAwZA0KICBwcml2YXRlIGRvdWJsZSBydW5uaW5nID0gMGQNCiAgDQogIHByaXZhdGUgTGlzdDxNYXA8U3RyaW5nLFN0cmluZz4+IGFsbFJvd3MgPSBbXQ0KDQogIHB1YmxpYyBsc3RDdXN0U3VwcGxpZXIoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBQcm9ncmFtQVBJIHByb2dyYW0pIHsNCiAgICB0aGlzLm1pID0gbWkNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtDQogIH0NCg0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIC8vIFBhcnNlIGlucHV0cw0KICAgIENPTk8gPSBzYWZlSW50MihtaS5pbkRhdGEuZ2V0KCJDT05PIiksIHByb2dyYW0uZ2V0TERBWkQoKS5DT05PKQ0KICAgIERJVkkgPSBzKG1pLmluRGF0YS5nZXQoIkRJVkkiKSkNCiAgICBTVU5PID0gcyhtaS5pbkRhdGEuZ2V0KCJTVU5PIikpDQogICAgUFlOTyA9IHMobWkuaW5EYXRhLmdldCgiUFlOTyIpKQ0KICAgIFNDTk8gPSBzKG1pLmluRGF0YS5nZXQoIlNDTk8iKSkNCiAgICBDVU5PID0gcyhtaS5pbkRhdGEuZ2V0KCJDVU5PIikpDQogICAgRkRBVCA9IHRvSW50KG1pLmluRGF0YS5nZXQoIkZEQVQiKSkNCiAgICBUREFUID0gdG9JbnQobWkuaW5EYXRhLmdldCgiVERBVCIpKQ0KDQogICAgaWYgKGlzRW1wdHkoRElWSSkpIHsgbWkuZXJyb3IoIkRJVkkgaXMgcmVxdWlyZWQiKTsgcmV0dXJuIH0NCiAgICBpZiAoQ09OTyA8PSAwKSAgICAgeyBtaS5lcnJvcigiQ09OTyBpcyByZXF1aXJlZCIpOyByZXR1cm4gfQ0KICAgIGlmIChUREFUICE9IDAgJiYgRkRBVCAhPSAwICYmIFREQVQgPCBGREFUKSB7IG1pLmVycm9yKCJUREFUIG11c3QgYmUgPj0gRkRBVCIpOyByZXR1cm4gfQ0KDQogICAgLy8gT3BlbmluZyBiYWxhbmNlICjQtNC+IEZEQVQpID0gQVAgKyBBUiAo0LIg0LLQsNC70Y7RgtC1INC00LLQuNC20LXQvdC40Y8sINGCLtC1LiBDVUFNKQ0KICAgIG9wZW5pbmcgPSBzdW1PcGVuaW5nQVAoQ09OTywgRElWSSwgU1VOTywgRkRBVCkgKyBzdW1PcGVuaW5nQVIoQ09OTywgRElWSSwgZmlyc3ROWjMoU0NOTywgQ1VOTywgUFlOTyksIEZEQVQpDQogICAgcnVubmluZyA9IG9wZW5pbmcNCg0KICAgIC8vIEFQIGJyYW5jaCAoc3VwcGxpZXIpOiDQvNC+0LbQvdC+INC90LUg0LLRi9C30YvQstCw0YLRjCwg0LXRgdC70Lgg0L3QtSDQstGL0LHRgNCw0L0gU1VOTw0KICAgIGlmICghaXNFbXB0eShTVU5PKSkgew0KICAgICAgcmVhZEZQTEVERygpDQogICAgfQ0KDQogICAgLy8gQVIgYnJhbmNoIChsaW5rZWQgY3VzdG9tZXIpLiDQn9C+INCi0Jcg0YHQvtC+0LHRidCw0LXQvCDQvtCxINC+0YLRgdGD0YLRgdGC0LLQuNC4INGB0LLRj9C30LDQvdC90L7Qs9C+INC60LvQuNC10L3RgtCwLg0KICAgIFN0cmluZyBsaW5rZWQgPSBmaXJzdE5aMyhTQ05PLCBDVU5PLCBQWU5PKQ0KICAgIGlmIChpc0VtcHR5KGxpbmtlZCkpIHsNCiAgICAgIG1pLmVycm9yKCJObyBsaW5rZWQgY3VzdG9tZXIgKFNDTk8vQ1VOTy9QWU5PIGlzIGVtcHR5KSBmb3IgdGhlIHNlbGVjdGVkIHN1cHBsaWVyIikNCiAgICAgIHJldHVybg0KICAgIH0NCiAgICByZWFkRlNMRURHKGxpbmtlZCkNCiAgICBzZW5kVG9PdXRwdXQoKTsNCiAgfQ0KDQogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC8vIE9wZW5pbmcgc3Vtcw0KICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICBwcml2YXRlIGRvdWJsZSBzdW1PcGVuaW5nQVAoaW50IGNvbm8sIFN0cmluZyBkaXZpLCBTdHJpbmcgc3VubywgaW50IGJlZm9yZUFjZHQpIHsNCiAgICBpZiAoaXNFbXB0eShzdW5vKSB8fCBiZWZvcmVBY2R0ID09IDApIHJldHVybiAwZA0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGVmID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVERyIpDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwID0gZWYuZXEoIkVQQ09OTyIsIFN0cmluZy52YWx1ZU9mKGNvbm8pKQ0KICAgICAgLmFuZChlZi5lcSgiRVBESVZJIiwgZGl2aSkpDQogICAgICAuYW5kKGVmLmVxKCJFUFNVTk8iLCBzdW5vKSkNCiAgICAgIC5hbmQoZWYubHQoIkVQQUNEVCIsIFN0cmluZy52YWx1ZU9mKGJlZm9yZUFjZHQpKSkNCiAgICAgIC8vINGC0LUg0LbQtSDQsdC40LfQvdC10YEt0L7Qs9GA0LDQvdC40YfQtdC90LjRjywg0YfRgtC+INC4INCyINC+0YHQvdC+0LLQvdC+0Lkg0LLRi9Cx0L7RgNC60LUNCiAgICAgIC5hbmQoIGVmLmVxKCJFUElWVFAiLCJBUCIpLm9yKCBlZi5lcSgiRVBUUkNEIiwiNDAiKS5vciggZWYuZXEoIkVQVFJDRCIsIjUwIikgKSApICkNCg0KICAgIERCQWN0aW9uIGEgPSBkYXRhYmFzZS50YWJsZSgiRlBMRURHIikuaW5kZXgoIjAwIikubWF0Y2hpbmcoZXhwKQ0KICAgICAgLnNlbGVjdGlvbigiRVBDVUFNIikNCiAgICAgIC5idWlsZCgpDQoNCiAgICBEQkNvbnRhaW5lciBjID0gYS5nZXRDb250YWluZXIoKQ0KICAgIGZpbmFsIGRvdWJsZVtdIHN1bSA9IG5ldyBkb3VibGVbMV0NCiAgICBhLnJlYWRBbGwoYywgMCwgMTAwMDAwLCB7IERCQ29udGFpbmVyIHJvdyAtPg0KICAgICAgc3VtWzBdICs9IHRvRG91YmxlKHJvdy5nZXQoIkVQQ1VBTSIpKQ0KICAgIH0pDQogICAgcmV0dXJuIHN1bVswXQ0KICB9DQoNCiAgcHJpdmF0ZSBkb3VibGUgc3VtT3BlbmluZ0FSKGludCBjb25vLCBTdHJpbmcgZGl2aSwgU3RyaW5nIHBheWVyLCBpbnQgYmVmb3JlQWNkdCkgew0KICAgIGlmIChpc0VtcHR5KHBheWVyKSB8fCBiZWZvcmVBY2R0ID09IDApIHJldHVybiAwZA0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGVmID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZTTEVERyIpDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwID0gZWYuZXEoIkVTQ09OTyIsIFN0cmluZy52YWx1ZU9mKGNvbm8pKQ0KICAgICAgLmFuZChlZi5lcSgiRVNESVZJIiwgZGl2aSkpDQogICAgICAuYW5kKGVmLmVxKCJFU1BZTk8iLCBwYXllcikpDQogICAgICAuYW5kKGVmLmx0KCJFU0FDRFQiLCBTdHJpbmcudmFsdWVPZihiZWZvcmVBY2R0KSkpDQogICAgICAvLyDQvNGP0LPQutC40Lkg0YTQuNC70YzRgtGAINC/0L4g0KLQlw0KICAgICAgLmFuZCggZWYuZXEoIkVTUFlSUyIsIiIpLm9yKCBlZi5sdCgiRVNQWVJTIiwiNzAiKSApICkNCg0KICAgIERCQWN0aW9uIGEgPSBkYXRhYmFzZS50YWJsZSgiRlNMRURHIikuaW5kZXgoIjAwIikubWF0Y2hpbmcoZXhwKQ0KICAgICAgLnNlbGVjdGlvbigiRVNDVUFNIikNCiAgICAgIC5idWlsZCgpDQoNCiAgICBEQkNvbnRhaW5lciBjID0gYS5nZXRDb250YWluZXIoKQ0KICAgIGZpbmFsIGRvdWJsZVtdIHN1bSA9IG5ldyBkb3VibGVbMV0NCiAgICBhLnJlYWRBbGwoYywgMCwgMTAwMDAwLCB7IERCQ29udGFpbmVyIHJvdyAtPg0KICAgICAgc3VtWzBdICs9IHRvRG91YmxlKHJvdy5nZXQoIkVTQ1VBTSIpKQ0KICAgIH0pDQogICAgcmV0dXJuIHN1bVswXQ0KICB9DQoNCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgLy8gQVA6IEZQTEVERyArIEZHTEVERyAoKyBGQVBDSEsgLyBDU1lOQlYgLyBGUExFRFggLyBDSURNQVMpDQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogIHZvaWQgcmVhZEZQTEVERygpIHsNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBlZiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKQ0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGV4cCA9IGVmLmVxKCJFUENPTk8iLCBTdHJpbmcudmFsdWVPZihDT05PKSkNCiAgICAgIC5hbmQoZWYuZXEoIkVQRElWSSIsIERJVkkpKQ0KICAgICAgLmFuZChlZi5lcSgiRVBTVU5PIiwgU1VOTykpDQoNCiAgICBpZiAoRkRBVCAhPSAwKSBleHAgPSBleHAuYW5kKGVmLmdlKCJFUEFDRFQiLCBTdHJpbmcudmFsdWVPZihGREFUKSkpDQogICAgaWYgKFREQVQgIT0gMCkgZXhwID0gZXhwLmFuZChlZi5sZSgiRVBBQ0RUIiwgU3RyaW5nLnZhbHVlT2YoVERBVCkpKQ0KDQogICAgLy8gKEVQSVZUUD0nQVAnKSBPUiAoRVBUUkNEIGluIDQwLDUwKQ0KICAgIGV4cCA9IGV4cC5hbmQoIGVmLmVxKCJFUElWVFAiLCJBUCIpLm9yKCBlZi5lcSgiRVBUUkNEIiwiNDAiKS5vciggZWYuZXEoIkVQVFJDRCIsIjUwIikgKSApICkNCg0KICAgIERCQWN0aW9uIGFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJGUExFREciKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHApDQogICAgICAuc2VsZWN0aW9uKEZQTEVER19GSUVMRFMpDQogICAgICAuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGMgPSBhY3Rpb24uZ2V0Q29udGFpbmVyKCkNCg0KICAgIGFjdGlvbi5yZWFkQWxsKGMsIDAsIDEwMDAwMCwgeyBEQkNvbnRhaW5lciBmcCAtPg0KICAgICAgTWFwPFN0cmluZyxTdHJpbmc+IHIgPSBuZXcgSGFzaE1hcDxTdHJpbmcsU3RyaW5nPigpDQogICAgICBmb3IgKFN0cmluZyBmIDogRlBMRURHX0ZJRUxEUykgew0KICAgICAgICBPYmplY3QgdiA9IGZwLmdldChmKQ0KICAgICAgICByLnB1dChmLCB2ID09IG51bGwgPyAiIiA6IHYudG9TdHJpbmcoKSkNCiAgICAgIH0NCg0KICAgICAgam9pbkZHTEVER19mcm9tRlAocikNCiAgICAgIGpvaW5GQVBDSEsocikNCiAgICAgIGpvaW5DU1lOQlZfZnJvbVZTRVJfQVAocikNCiAgICAgIGpvaW5GUExFRFgocikNCiAgICAgIGpvaW5DSURNQVMociwgci5nZXQoIkVQU1VOTyIpKSAgLy8g0LjQvNGPINC/0L7RgdGC0LDQstGJ0LjQutCwDQoNCiAgICAgIHdyaXRlUm93KHIsIGZhbHNlKSAvLyBBUA0KICAgIH0pDQogIH0NCg0KICAvLyBGR0xFREcgam9pbiBmb3IgQVANCiAgdm9pZCBqb2luRkdMRURHX2Zyb21GUChNYXA8U3RyaW5nLFN0cmluZz4gcikgew0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGVmID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZHTEVERyIpDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwID0gZWYuZXEoIkVHQ09OTyIsIHIuZ2V0KCJFUENPTk8iKSkNCiAgICAgIC5hbmQoZWYuZXEoIkVHRElWSSIsIHIuZ2V0KCJFUERJVkkiKSkpDQogICAgICAuYW5kKGVmLmVxKCJFR1lFQTQiLCByLmdldCgiRVBZRUE0IikpKQ0KICAgICAgLmFuZChlZi5lcSgiRUdKUk5PIiwgci5nZXQoIkVQSlJOTyIpKSkNCiAgICAgIC5hbmQoZWYuZXEoIkVHSlNOTyIsIHIuZ2V0KCJFUEpTTk8iKSkpDQogICAgICAvLyDQv9C+INC30LDQvNC10YLQutC1OiBFR0ZFSUQ9J0FQMTAnIE9SIEVHRk5DTiE9JzUwMCcNCiAgICAgIC5hbmQoIGVmLmVxKCJFR0ZFSUQiLCJBUDEwIikub3IoIGVmLm5lKCJFR0ZOQ04iLCI1MDAiKSApICkNCg0KICAgIERCQWN0aW9uIGEgPSBkYXRhYmFzZS50YWJsZSgiRkdMRURHIikuaW5kZXgoIjAwIikubWF0Y2hpbmcoZXhwKQ0KICAgICAgLnNlbGVjdGlvbihGR0xFREdfRklFTERTKQ0KICAgICAgLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjID0gYS5nZXRDb250YWluZXIoKQ0KDQogICAgYS5yZWFkQWxsKGMsIDAsIDUsIHsgREJDb250YWluZXIgZmcgLT4NCiAgICAgIGZvciAoU3RyaW5nIGYgOiBGR0xFREdfRklFTERTKSB7DQogICAgICAgIE9iamVjdCB2ID0gZmcuZ2V0KGYpDQogICAgICAgIHIucHV0KGYsIHYgPT0gbnVsbCA/ICIiIDogdi50b1N0cmluZygpKQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCg0KICAvLyBGQVBDSEsgKExGIDAwKSBmb3IgQVANCiAgdm9pZCBqb2luRkFQQ0hLKE1hcDxTdHJpbmcsU3RyaW5nPiByKSB7DQogICAgU3RyaW5nIHZzZXIgPSByLmdldCgiRVBWU0VSIikNCiAgICBTdHJpbmcgdm9ubyA9IHIuZ2V0KCJFUFZPTk8iKQ0KICAgIGlmIChpc0VtcHR5KHZzZXIpIHx8IGlzRW1wdHkodm9ubykpIHJldHVybg0KDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZWYgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRkFQQ0hLIikNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBlZi5lcSgiQ0tDT05PIiwgci5nZXQoIkVQQ09OTyIpKQ0KICAgICAgLmFuZChlZi5lcSgiQ0tESVZJIiwgci5nZXQoIkVQRElWSSIpKSkNCiAgICAgIC5hbmQoZWYuZXEoIkNLVlNFUiIsIHZzZXIpKQ0KICAgICAgLmFuZChlZi5lcSgiQ0tWT05PIiwgdm9ubykpDQoNCiAgICBEQkFjdGlvbiBhID0gZGF0YWJhc2UudGFibGUoIkZBUENISyIpLmluZGV4KCIwMCIpLm1hdGNoaW5nKGV4cCkNCiAgICAgIC5zZWxlY3Rpb24oRkFQQ0hLX0ZJRUxEU19TQUZFKQ0KICAgICAgLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjID0gYS5nZXRDb250YWluZXIoKQ0KDQogICAgYS5yZWFkQWxsKGMsIDAsIDEsIHsgREJDb250YWluZXIgY2sgLT4NCiAgICAgIGZvciAoU3RyaW5nIGYgOiBGQVBDSEtfRklFTERTX1NBRkUpIHsNCiAgICAgICAgT2JqZWN0IHYgPSBjay5nZXQoZikNCiAgICAgICAgci5wdXQoZiwgdiA9PSBudWxsID8gIiIgOiB2LnRvU3RyaW5nKCkpDQogICAgICB9DQogICAgfSkNCiAgfQ0KDQogIC8vIENTWU5CViBzaG9ydCB0ZXh0IGZvciBBUCBieSBWU0VSDQogIHZvaWQgam9pbkNTWU5CVl9mcm9tVlNFUl9BUChNYXA8U3RyaW5nLFN0cmluZz4gcikgew0KICAgIFN0cmluZyB2c2VyID0gci5nZXQoIkVQVlNFUiIpDQogICAgaWYgKGlzRW1wdHkodnNlcikpIHJldHVybg0KDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZWYgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ1NZTkJWIikNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBlZi5lcSgiRFZDT05PIiwgci5nZXQoIkVQQ09OTyIpKQ0KICAgICAgLmFuZChlZi5lcSgiRFZESVZJIiwgci5nZXQoIkVQRElWSSIpKSkNCiAgICAgIC5hbmQoZWYuZXEoIkRWVlNFUiIsIHZzZXIpKQ0KDQogICAgREJBY3Rpb24gYWN0aW9uID0gZGF0YWJhc2UudGFibGUoIkNTWU5CViIpLmluZGV4KCIwMCIpLm1hdGNoaW5nKGV4cCkNCiAgICAgIC5zZWxlY3Rpb24oQ1NZTkJWX0ZJRUxEUykNCiAgICAgIC5idWlsZCgpDQogICAgREJDb250YWluZXIgYyA9IGFjdGlvbi5nZXRDb250YWluZXIoKQ0KDQogICAgYWN0aW9uLnJlYWRBbGwoYywgMCwgMSwgeyBEQkNvbnRhaW5lciBjcyAtPg0KICAgICAgZm9yIChTdHJpbmcgZiA6IENTWU5CVl9GSUVMRFMpIHsNCiAgICAgICAgT2JqZWN0IHYgPSBjcy5nZXQoZikNCiAgICAgICAgci5wdXQoZiwgdiA9PSBudWxsID8gIiIgOiB2LnRvU3RyaW5nKCkpDQogICAgICB9DQogICAgfSkNCiAgfQ0KDQogIC8vIEZQTEVEWCAoRVBQRVhOPTQwOSAtPiBNQVNBVi9QUk9QIG51bWJlcikNCiAgdm9pZCBqb2luRlBMRURYKE1hcDxTdHJpbmcsU3RyaW5nPiByKSB7DQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZWYgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURYIikNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBlZi5lcSgiRVBDT05PIiwgci5nZXQoIkVQQ09OTyIpKQ0KICAgICAgLmFuZChlZi5lcSgiRVBESVZJIiwgci5nZXQoIkVQRElWSSIpKSkNCiAgICAgIC5hbmQoZWYuZXEoIkVQWUVBNCIsIHIuZ2V0KCJFUFlFQTQiKSkpDQogICAgICAuYW5kKGVmLmVxKCJFUEpSTk8iLCByLmdldCgiRVBKUk5PIikpKQ0KICAgICAgLmFuZChlZi5lcSgiRVBKU05PIiwgci5nZXQoIkVQSlNOTyIpKSkNCiAgICAgIC5hbmQoZWYuZXEoIkVQUEVYTiIsICI0MDkiKSkNCg0KICAgIERCQWN0aW9uIGEgPSBkYXRhYmFzZS50YWJsZSgiRlBMRURYIikuaW5kZXgoIjAwIikubWF0Y2hpbmcoZXhwKQ0KICAgICAgLnNlbGVjdGlvbihGUExFRFhfRklFTERTKQ0KICAgICAgLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjID0gYS5nZXRDb250YWluZXIoKQ0KDQogICAgYS5yZWFkQWxsKGMsIDAsIDMsIHsgREJDb250YWluZXIgZHggLT4NCiAgICAgIGZvciAoU3RyaW5nIGYgOiBGUExFRFhfRklFTERTKSB7DQogICAgICAgIE9iamVjdCB2ID0gZHguZ2V0KGYpDQogICAgICAgIHIucHV0KGYsIHYgPT0gbnVsbCA/ICIiIDogdi50b1N0cmluZygpKQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCg0KICAvLyBDSURNQVMgam9pbiBmb3Igc3VwcGxpZXIgbmFtZQ0KICB2b2lkIGpvaW5DSURNQVMoTWFwPFN0cmluZyxTdHJpbmc+IHIsIFN0cmluZyBzdXBwbGllck51bWJlcikgew0KICAgIGlmIChpc0VtcHR5KHN1cHBsaWVyTnVtYmVyKSkgcmV0dXJuDQogICAgDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZWYgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ0lETUFTIikNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBlZi5lcSgiSURDT05PIiwgU3RyaW5nLnZhbHVlT2YoQ09OTykpDQogICAgICAuYW5kKGVmLmVxKCJJRFNVTk8iLCBzdXBwbGllck51bWJlcikpDQogICAgDQogICAgREJBY3Rpb24gYSA9IGRhdGFiYXNlLnRhYmxlKCJDSURNQVMiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHApDQogICAgICAuc2VsZWN0aW9uKENJRE1BU19GSUVMRFMpDQogICAgICAuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGMgPSBhLmdldENvbnRhaW5lcigpDQogICAgDQogICAgYS5yZWFkQWxsKGMsIDAsIDEsIHsgREJDb250YWluZXIgY2QgLT4NCiAgICAgIGZvciAoU3RyaW5nIGYgOiBDSURNQVNfRklFTERTKSB7DQogICAgICAgIE9iamVjdCB2ID0gY2QuZ2V0KGYpDQogICAgICAgIHIucHV0KGYsIHYgPT0gbnVsbCA/ICIiIDogdi50b1N0cmluZygpKQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAvLyBBUjogRlNMRURHICsgRkdMRURHICgrIENTWU5CViArIEZTTEVEWFsyMTIsMjEzLDIxNCwyMTVdICsgT0NVU01BKQ0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICB2b2lkIHJlYWRGU0xFREcoU3RyaW5nIGxpbmtlZEN1c3RvbWVyKSB7DQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZWYgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlNMRURHIikNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBlZi5lcSgiRVNDT05PIiwgU3RyaW5nLnZhbHVlT2YoQ09OTykpDQogICAgICAuYW5kKGVmLmVxKCJFU0RJVkkiLCBESVZJKSkNCiAgICAgIC5hbmQoZWYuZXEoIkVTUFlOTyIsIGxpbmtlZEN1c3RvbWVyKSkNCg0KICAgIGlmIChGREFUICE9IDApIGV4cCA9IGV4cC5hbmQoZWYuZ2UoIkVTQUNEVCIsIFN0cmluZy52YWx1ZU9mKEZEQVQpKSkNCiAgICBpZiAoVERBVCAhPSAwKSBleHAgPSBleHAuYW5kKGVmLmxlKCJFU0FDRFQiLCBTdHJpbmcudmFsdWVPZihUREFUKSkpDQoNCiAgICAvLyDQvNGP0LPQutC40Lkg0YTQuNC70YzRgtGADQogICAgZXhwID0gZXhwLmFuZCggZWYuZXEoIkVTUFlSUyIsIiIpLm9yKCBlZi5sdCgiRVNQWVJTIiwiNzAiKSApICkNCg0KICAgIERCQWN0aW9uIGFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJGU0xFREciKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHApDQogICAgICAuc2VsZWN0aW9uKEZTTEVER19GSUVMRFMpDQogICAgICAuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGMgPSBhY3Rpb24uZ2V0Q29udGFpbmVyKCkNCg0KICAgIGFjdGlvbi5yZWFkQWxsKGMsIDAsIDEwMDAwMCwgeyBEQkNvbnRhaW5lciBmcyAtPg0KICAgICAgTWFwPFN0cmluZyxTdHJpbmc+IHIgPSBuZXcgSGFzaE1hcDxTdHJpbmcsU3RyaW5nPigpDQogICAgICBmb3IgKFN0cmluZyBmIDogRlNMRURHX0ZJRUxEUykgew0KICAgICAgICBPYmplY3QgdiA9IGZzLmdldChmKQ0KICAgICAgICByLnB1dChmLCB2ID09IG51bGwgPyAiIiA6IHYudG9TdHJpbmcoKSkNCiAgICAgIH0NCg0KICAgICAgam9pbkZHTEVER19mcm9tRlMocikNCiAgICAgIGpvaW5DU1lOQlZfZnJvbVZTRVJfQVIocikNCiAgICAgIGpvaW5PQ1VTTUEociwgci5nZXQoIkVTUFlOTyIpKSAgLy8g0LjQvNGPINC60LvQuNC10L3RgtCwDQogICAgICAvLyBqb2luRlNMRURYX29uZShyLCAiMjEzIiwgIkNVU1RfQ0siKQ0KICAgICAgLy8gam9pbkZTTEVEWF9vbmUociwgIjIxNCIsICJDX1NfQ0siKQ0KICAgICAgLy8gam9pbkZTTEVEWF9vbmUociwgIjIxNSIsICJCQU5LX1BBR0UiKQ0KICAgICAgLy8gam9pbkZTTEVEWF9vbmUociwgIjIxMiIsICJQUk9QX04iKQ0KDQogICAgICB3cml0ZVJvdyhyLCB0cnVlKSAvLyBBUg0KICAgIH0pDQogIH0NCg0KICAvLyBGR0xFREcgam9pbiBmb3IgQVINCiAgdm9pZCBqb2luRkdMRURHX2Zyb21GUyhNYXA8U3RyaW5nLFN0cmluZz4gcikgew0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGVmID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZHTEVERyIpDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwID0gZWYuZXEoIkVHQ09OTyIsIHIuZ2V0KCJFU0NPTk8iKSkNCiAgICAgIC5hbmQoZWYuZXEoIkVHRElWSSIsIHIuZ2V0KCJFU0RJVkkiKSkpDQogICAgICAuYW5kKGVmLmVxKCJFR1lFQTQiLCByLmdldCgiRVNZRUE0IikpKQ0KICAgICAgLmFuZChlZi5lcSgiRUdKUk5PIiwgci5nZXQoIkVTSlJOTyIpKSkNCiAgICAgIC5hbmQoZWYuZXEoIkVHSlNOTyIsIHIuZ2V0KCJFU0pTTk8iKSkpDQoNCiAgICBEQkFjdGlvbiBhID0gZGF0YWJhc2UudGFibGUoIkZHTEVERyIpLmluZGV4KCIwMCIpLm1hdGNoaW5nKGV4cCkNCiAgICAgIC5zZWxlY3Rpb24oRkdMRURHX0ZJRUxEUykNCiAgICAgIC5idWlsZCgpDQogICAgREJDb250YWluZXIgYyA9IGEuZ2V0Q29udGFpbmVyKCkNCg0KICAgIGEucmVhZEFsbChjLCAwLCA1LCB7IERCQ29udGFpbmVyIGZnIC0+DQogICAgICBmb3IgKFN0cmluZyBmIDogRkdMRURHX0ZJRUxEUykgew0KICAgICAgICBPYmplY3QgdiA9IGZnLmdldChmKQ0KICAgICAgICByLnB1dChmLCB2ID09IG51bGwgPyAiIiA6IHYudG9TdHJpbmcoKSkNCiAgICAgIH0NCiAgICB9KQ0KICB9DQoNCiAgLy8gQ1NZTkJWIGZvciBBUiBieSBFU1ZTRVINCiAgdm9pZCBqb2luQ1NZTkJWX2Zyb21WU0VSX0FSKE1hcDxTdHJpbmcsU3RyaW5nPiByKSB7DQogICAgU3RyaW5nIHZzZXIgPSByLmdldCgiRVNWU0VSIikNCiAgICBpZiAoaXNFbXB0eSh2c2VyKSkgcmV0dXJuDQoNCiAgICBTdHJpbmcgZHZjb25vID0gaXNFbXB0eShyLmdldCgiRVNDT05PIikpID8gU3RyaW5nLnZhbHVlT2YoQ09OTykgOiByLmdldCgiRVNDT05PIikNCg0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGVmID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkNTWU5CViIpDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwID0gZWYuZXEoIkRWQ09OTyIsIGR2Y29ubykNCiAgICAgIC5hbmQoZWYuZXEoIkRWRElWSSIsIHIuZ2V0KCJFU0RJVkkiKSkpDQogICAgICAuYW5kKGVmLmVxKCJEVlZTRVIiLCB2c2VyKSkNCg0KICAgIERCQWN0aW9uIGFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJDU1lOQlYiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHApDQogICAgICAuc2VsZWN0aW9uKENTWU5CVl9GSUVMRFMpDQogICAgICAuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGMgPSBhY3Rpb24uZ2V0Q29udGFpbmVyKCkNCg0KICAgIGFjdGlvbi5yZWFkQWxsKGMsIDAsIDEsIHsgREJDb250YWluZXIgY3MgLT4NCiAgICAgIGZvciAoU3RyaW5nIGYgOiBDU1lOQlZfRklFTERTKSB7DQogICAgICAgIE9iamVjdCB2ID0gY3MuZ2V0KGYpDQogICAgICAgIHIucHV0KGYsIHYgPT0gbnVsbCA/ICIiIDogdi50b1N0cmluZygpKQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCg0KICAvLyBPQ1VTTUEgam9pbiBmb3IgY3VzdG9tZXIgbmFtZQ0KICB2b2lkIGpvaW5PQ1VTTUEoTWFwPFN0cmluZyxTdHJpbmc+IHIsIFN0cmluZyBjdXN0b21lck51bWJlcikgew0KICAgIGlmIChpc0VtcHR5KGN1c3RvbWVyTnVtYmVyKSkgcmV0dXJuDQogICAgDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZWYgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiT0NVU01BIikNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBlZi5lcSgiT0tDT05PIiwgU3RyaW5nLnZhbHVlT2YoQ09OTykpDQogICAgICAuYW5kKGVmLmVxKCJPS0NVTk8iLCBjdXN0b21lck51bWJlcikpDQogICAgDQogICAgREJBY3Rpb24gYSA9IGRhdGFiYXNlLnRhYmxlKCJPQ1VTTUEiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHApDQogICAgICAuc2VsZWN0aW9uKE9DVVNNQV9GSUVMRFMpDQogICAgICAuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGMgPSBhLmdldENvbnRhaW5lcigpDQogICAgDQogICAgYS5yZWFkQWxsKGMsIDAsIDEsIHsgREJDb250YWluZXIgb2MgLT4NCiAgICAgIGZvciAoU3RyaW5nIGYgOiBPQ1VTTUFfRklFTERTKSB7DQogICAgICAgIE9iamVjdCB2ID0gb2MuZ2V0KGYpDQogICAgICAgIHIucHV0KGYsIHYgPT0gbnVsbCA/ICIiIDogdi50b1N0cmluZygpKQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCg0KICAvLyBGU0xFRFggcmVhZGVyIGZvciBvbmUgU0VYTiAtPiB3cml0ZSBpbnRvIG91dEtleQ0KICB2b2lkIGpvaW5GU0xFRFhfb25lKE1hcDxTdHJpbmcsU3RyaW5nPiByLCBTdHJpbmcgc2V4biwgU3RyaW5nIG91dEtleSkgew0KICAgIFN0cmluZyBzZWNvbm8gPSBpc0VtcHR5KHIuZ2V0KCJFU0NPTk8iKSkgPyBTdHJpbmcudmFsdWVPZihDT05PKSA6IHIuZ2V0KCJFU0NPTk8iKQ0KDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZWYgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlNMRURYIikNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBlZi5lcSgiU0VDT05PIiwgc2Vjb25vKQ0KICAgICAgLmFuZChlZi5lcSgiU0VESVZJIiwgci5nZXQoIkVTRElWSSIpKSkNCiAgICAgIC5hbmQoZWYuZXEoIlNFWUVBNCIsIHIuZ2V0KCJFU1lFQTQiKSkpDQogICAgICAuYW5kKGVmLmVxKCJTRUpSTk8iLCByLmdldCgiRVNKUk5PIikpKQ0KICAgICAgLmFuZChlZi5lcSgiU0VKU05PIiwgci5nZXQoIkVTSlNOTyIpKSkNCiAgICAgIC5hbmQoZWYuZXEoIlNFWE4iLCBzZXhuKSkNCg0KICAgIERCQWN0aW9uIGFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJGU0xFRFgiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHApDQogICAgICAvLyDQktCQ0JbQndCeOiDQstGL0LHQuNGA0LDQtdC8INGC0L7Qu9GM0LrQviDQt9C90LDRh9C10L3QuNC1LCDQvdC40LrQsNC60LjRhSDQutC70Y7Rh9C10LkNCiAgICAgIC5zZWxlY3Rpb24oIlNFWEkiKQ0KICAgICAgLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjID0gYWN0aW9uLmdldENvbnRhaW5lcigpDQoNCiAgICBhY3Rpb24ucmVhZEFsbChjLCAwLCAxLCB7IERCQ29udGFpbmVyIGR4IC0+DQogICAgICBPYmplY3QgdiA9IGR4LmdldCgiU0VYSSIpDQogICAgICBTdHJpbmcgc1ZhbCA9ICh2ID09IG51bGwpID8gIiIgOiB2LnRvU3RyaW5nKCkNCiAgICAgIGlmICghaXNFbXB0eShzVmFsKSkgci5wdXQob3V0S2V5LCBzVmFsKQ0KICAgIH0pDQogIH0NCg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAvLyBVbmlmaWVkIG91dHB1dCArIHJ1bm5pbmcgYmFsYW5jZQ0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KIHZvaWQgd3JpdGVSb3coTWFwPFN0cmluZyxTdHJpbmc+IHIsIGJvb2xlYW4gaXNBUikgew0KICAgIE1hcDxTdHJpbmcsU3RyaW5nPiBvdXRwdXRSb3cgPSBbOl0NCiAgICANCiAgICAvLyBWb3VjaGVyIGlkZW50aWZpY2F0aW9uDQogICAgU3RyaW5nIHZzZXIgPSBpc0FSID8gci5nZXQoIkVTVlNFUiIpIDogci5nZXQoIkVQVlNFUiIpDQogICAgU3RyaW5nIHZvbm8gPSBpc0FSID8gci5nZXQoIkVTVk9OTyIpIDogci5nZXQoIkVQVk9OTyIpDQogICAgb3V0cHV0Um93LnB1dCgiVlNFUiIsIG56KHZzZXIpKQ0KICAgIG91dHB1dFJvdy5wdXQoIlZPTk8iLCBueih2b25vKSkNCiAgICBvdXRwdXRSb3cucHV0KCJTSURFIiwgaXNBUiA/ICJDdXN0b21lciIgOiAiU3VwcGxpZXIiKQ0KICAgIA0KICAgIC8vIERhdGVzDQogICAgU3RyaW5nIGFjZHQgPSBpc0FSID8gci5nZXQoIkVTQUNEVCIpIDogci5nZXQoIkVQQUNEVCIpDQogICAgb3V0cHV0Um93LnB1dCgiQUNEVCIsIG56KGFjZHQpKQ0KICAgIG91dHB1dFJvdy5wdXQoIkRVRFQiLCBueihpc0FSID8gci5nZXQoIkVTRFVEVCIpIDogci5nZXQoIkVQRFVEVCIpKSkNCiAgICBvdXRwdXRSb3cucHV0KCJJVkRUIiwgbnooaXNBUiA/IHIuZ2V0KCJFU0lWRFQiKSA6IHIuZ2V0KCJFUElWRFQiKSkpDQogICAgDQogICAgLy8gQ3VycmVuY3kgLyBhbW91bnRzDQogICAgU3RyaW5nIGN1YW1TdHIgPSBpc0FSID8gci5nZXQoIkVTQ1VBTSIpIDogci5nZXQoIkVQQ1VBTSIpDQogICAgZG91YmxlIGN1YW0gPSB0b0RvdWJsZShjdWFtU3RyKQ0KICAgIG91dHB1dFJvdy5wdXQoIkNVQ0QiLCBueihpc0FSID8gci5nZXQoIkVTQ1VDRCIpIDogci5nZXQoIkVQQ1VDRCIpKSkNCiAgICBvdXRwdXRSb3cucHV0KCJDVUFNIiwgbnooY3VhbVN0cikpDQogICAgb3V0cHV0Um93LnB1dCgiTENBTSIsIG56KHIuZ2V0KCJFR0FDQU0iKSkpDQogICAgDQogICAgLy8gU2hvcnQvbG9uZyB0ZXh0DQogICAgb3V0cHV0Um93LnB1dCgiVFgxNSIsIG56KHIuZ2V0KCJEVlRYMTUiKSkpDQogICAgb3V0cHV0Um93LnB1dCgiVlRYVCIsIG56KHIuZ2V0KCJFR1ZUWFQiKSkpDQogICAgDQogICAgLy8gQ2hlY2tzIC8gYmFuayAvIHByb3Bvc2FsDQogICAgb3V0cHV0Um93LnB1dCgiQ0hLTiIsIG56KHIuZ2V0KCJDS0NIS04iKSkpDQogICAgb3V0cHV0Um93LnB1dCgiQ0NISyIsIG56KHIuZ2V0KCJDVVNUX0NLIikpKQ0KICAgIG91dHB1dFJvdy5wdXQoIlNDQ0siLCBueihyLmdldCgiQ19TX0NLIikpKQ0KICAgIG91dHB1dFJvdy5wdXQoIkJOS1AiLCBueihyLmdldCgiQkFOS19QQUdFIikpKQ0KICAgIG91dHB1dFJvdy5wdXQoIlBSUE4iLCBueihyLmdldCgiUFJPUF9OIikpKQ0KICAgIG91dHB1dFJvdy5wdXQoIk1BU1YiLCBueihpc0FSID8gci5nZXQoIlBST1BfTiIpIDogci5nZXQoIkVQUEVYSSIpKSkNCiAgICANCiAgICAvLyBLZXlzIC8gaWRlbnRpZmllcnMNCiAgICBvdXRwdXRSb3cucHV0KCJZRUE0IiwgbnooaXNBUiA/IHIuZ2V0KCJFU1lFQTQiKSA6IHIuZ2V0KCJFUFlFQTQiKSkpDQogICAgb3V0cHV0Um93LnB1dCgiSlJOTyIsIG56KGlzQVIgPyByLmdldCgiRVNKUk5PIikgOiByLmdldCgiRVBKUk5PIikpKQ0KICAgIG91dHB1dFJvdy5wdXQoIkpTTk8iLCBueihpc0FSID8gci5nZXQoIkVTSlNOTyIpIDogci5nZXQoIkVQSlNOTyIpKSkNCiAgICANCiAgICAvLyBDb3VudGVycGFydHkgJiBpbnZvaWNlDQogICAgb3V0cHV0Um93LnB1dCgiU1VOTyIsIG56KGlzQVIgPyByLmdldCgiRVNQWU5PIikgOiByLmdldCgiRVBTVU5PIikpKQ0KICAgIG91dHB1dFJvdy5wdXQoIlNJTk8iLCBueihpc0FSID8gci5nZXQoIkVTQ0lOTyIpIDogci5nZXQoIkVQU0lOTyIpKSkNCiAgICANCiAgICAvLyBOYW1lcw0KICAgIG91dHB1dFJvdy5wdXQoIlNVTk0iLCBueihpc0FSID8gIiIgOiByLmdldCgiSURTVU5NIikpKQ0KICAgIG91dHB1dFJvdy5wdXQoIkNVTk0iLCBueihpc0FSID8gci5nZXQoIk9LQ1VOTSIpIDogIiIpKQ0KICAgIA0KICAgIC8vIC0tLS0gT3BlbmluZyAvIERlYml0IC8gQ3JlZGl0IC8gUnVubmluZyAtLS0tDQogICAgb3V0cHV0Um93LnB1dCgiT1BDUiIsIGZvcm1hdEFtb3VudChvcGVuaW5nKSkNCiAgICANCiAgICBkb3VibGUgZGViaXQgPSBjdWFtID4gMCA/IGN1YW0gOiAwZA0KICAgIGRvdWJsZSBjcmVkaXQgPSBjdWFtIDwgMCA/IC1jdWFtIDogMGQNCiAgICANCiAgICBvdXRwdXRSb3cucHV0KCJERUJUIiwgZm9ybWF0QW1vdW50KGRlYml0KSkNCiAgICBvdXRwdXRSb3cucHV0KCJDUkVEIiwgZm9ybWF0QW1vdW50KGNyZWRpdCkpDQogICAgDQogICAgcnVubmluZyArPSAoZGViaXQgLSBjcmVkaXQpDQogICAgb3V0cHV0Um93LnB1dCgiUlVOQiIsIGZvcm1hdEFtb3VudChydW5uaW5nKSkNCiAgICANCiAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LIg0YHQv9C40YHQvtC6INCy0LzQtdGB0YLQviBtaS53cml0ZSgpDQogICAgYWxsUm93cy5hZGQob3V0cHV0Um93KQ0KfQ0KDQovLyDQndC+0LLRi9C5INC80LXRgtC+0LQg0LTQu9GPINGB0L7RgNGC0LjRgNC+0LLQutC4INC4INC+0YLQv9GA0LDQstC60Lgg0LIgb3V0cHV0DQogIHZvaWQgc2VuZFRvT3V0cHV0KCkgew0KICAgICAgLy8g0KHQvtGA0YLQuNGA0L7QstC60LAg0L/QviBBQ0RUDQogICAgICBhbGxSb3dzLnNvcnQgeyBpdC5BQ0RUIH0NCiAgICAgIA0KICAgICAgLy8g0J/QtdGA0LXRgdGH0LjRgtGL0LLQsNC10LwgcnVubmluZyBiYWxhbmNlINC/0L7RgdC70LUg0YHQvtGA0YLQuNGA0L7QstC60LgNCiAgICAgIHJ1bm5pbmcgPSBvcGVuaW5nDQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG9wZW5pbmdCYWxhbmNlID0gW1JVTkI6IG9wZW5pbmcudG9TdHJpbmcoKSwgQUNEVDogYWxsUm93c1swXS5BQ0RUXQ0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBjbG9zaW5nQmFsYW5jZSA9IFtSVU5COiBhbGxSb3dzWy0xXS5SVU5CLCBBQ0RUOiBhbGxSb3dzWy0xXS5BQ0RUXQ0KICAgIAkNCiAgICAJYWxsUm93cy5hZGQoMCwgb3BlbmluZ0JhbGFuY2UpDQogICAgCWFsbFJvd3MuYWRkKGNsb3NpbmdCYWxhbmNlKQ0KICAgIAkNCiAgICAgIGFsbFJvd3MuZWFjaFdpdGhJbmRleCB7IHJvdywgaW5kZXggLT4NCiAgICAgICAgICAvLyDQn9GA0L7Qv9GD0YHQutCw0LXQvCDRgNCw0YHRh9C10YIg0LTQu9GPINC/0LXRgNCy0L7QuSAoMCkg0Lgg0L/QvtGB0LvQtdC00L3QtdC5INGB0YLRgNC+0LrQuA0KICAgICAgICAgIGlmIChpbmRleCAhPSAwICYmIGluZGV4ICE9IGFsbFJvd3Muc2l6ZSgpIC0gMSkgew0KICAgICAgICAgICAgICBkb3VibGUgZGVidCA9IHRvRG91YmxlKHJvdy5ERUJUKQ0KICAgICAgICAgICAgICBkb3VibGUgY3JlZCA9IHRvRG91YmxlKHJvdy5DUkVEKQ0KICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgcnVubmluZyArPSAoZGVidCAtIGNyZWQpDQogICAgICAgICAgICAgIHJvdy5wdXQoIlJVTkIiLCBmb3JtYXRBbW91bnQocnVubmluZykpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgLy8g0JTQu9GPINC/0LXRgNCy0L7QuSDQuCDQv9C+0YHQu9C10LTQvdC10Lkg0YHRgtGA0L7QutC4INC/0YDQvtGB0YLQviDRgdGC0LDQstC40Lwg0YLQtdC60YPRidC40LkgcnVubmluZw0KICAgICAgICAgICAgICByb3cucHV0KCJSVU5CIiwgZm9ybWF0QW1vdW50KHJ1bm5pbmcpKQ0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICAvLyDQntGC0L/RgNCw0LLQu9GP0LXQvCDQsiBtaS5vdXREYXRhDQogICAgICAgICAgcm93LmVhY2ggeyBrZXksIHZhbHVlIC0+DQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KGtleSwgdmFsdWUpDQogICAgICAgICAgfQ0KICAgICAgICAgIG1pLndyaXRlKCkNCiAgICAgIH0NCiAgICAgIA0KICAgICAgLy8g0J7Rh9C40YnQsNC10Lwg0YHQv9C40YHQvtC6DQogICAgICBhbGxSb3dzLmNsZWFyKCkNCiAgfQ0KDQogIC8vIC0tLS0tLS0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tLS0tLS0tDQogIHByaXZhdGUgU3RyaW5nIHMoT2JqZWN0IG8pIHsgcmV0dXJuIG8gPT0gbnVsbCA/ICIiIDogby50b1N0cmluZygpLnRyaW0oKSB9DQogIHByaXZhdGUgU3RyaW5nIG56KFN0cmluZyB2KSB7IHJldHVybiB2ID09IG51bGwgPyAiIiA6IHYudHJpbSgpIH0NCiAgcHJpdmF0ZSBib29sZWFuIGlzRW1wdHkoU3RyaW5nIHgpIHsgcmV0dXJuIHggPT0gbnVsbCB8fCB4LnRyaW0oKS5pc0VtcHR5KCkgfQ0KDQogIHByaXZhdGUgU3RyaW5nIGZpcnN0TlozKFN0cmluZyBhLCBTdHJpbmcgYiwgU3RyaW5nIGMpIHsNCiAgICBpZiAoIWlzRW1wdHkoYSkpIHJldHVybiBhDQogICAgaWYgKCFpc0VtcHR5KGIpKSByZXR1cm4gYg0KICAgIGlmICghaXNFbXB0eShjKSkgcmV0dXJuIGMNCiAgICByZXR1cm4gIiINCiAgfQ0KDQogIHByaXZhdGUgaW50IHRvSW50KE9iamVjdCBvKSB7DQogICAgU3RyaW5nIHggPSBzKG8pDQogICAgaWYgKGlzRW1wdHkoeCkpIHJldHVybiAwDQogICAgdHJ5IHsgcmV0dXJuIEludGVnZXIucGFyc2VJbnQoeCkgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIG5mZSkgeyByZXR1cm4gMCB9DQogIH0NCg0KICAvKiogUHJpbWFyeSArIGRlZmF1bHQgKGRlZmF1bHQgbWF5IGJlIG51bWJlciBvciBzdHJpbmcpLiAqLw0KICBwcml2YXRlIGludCBzYWZlSW50MihPYmplY3QgcHJpbWFyeSwgT2JqZWN0IGRlZlZhbCkgew0KICAgIGludCBkZWZJbnQgPSAwDQogICAgU3RyaW5nIGRzID0gcyhkZWZWYWwpDQogICAgaWYgKCFpc0VtcHR5KGRzKSkgew0KICAgICAgdHJ5IHsgZGVmSW50ID0gSW50ZWdlci5wYXJzZUludChkcykgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGlnbm9yZSkgeyBkZWZJbnQgPSAwIH0NCiAgICB9DQogICAgU3RyaW5nIHMxID0gcyhwcmltYXJ5KQ0KICAgIGlmIChpc0VtcHR5KHMxKSkgcmV0dXJuIGRlZkludA0KICAgIHRyeSB7IHJldHVybiBJbnRlZ2VyLnBhcnNlSW50KHMxKSB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gaWdub3JlKSB7IHJldHVybiBkZWZJbnQgfQ0KICB9DQoNCiAgcHJpdmF0ZSBkb3VibGUgdG9Eb3VibGUoT2JqZWN0IG8pIHsNCiAgICBTdHJpbmcgeCA9IHMobykNCiAgICBpZiAoaXNFbXB0eSh4KSkgcmV0dXJuIDBkDQogICAgdHJ5IHsgcmV0dXJuIERvdWJsZS5wYXJzZURvdWJsZSh4KSB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gbmZlKSB7IHJldHVybiAwZCB9DQogIH0NCg0KICBwcml2YXRlIFN0cmluZyBmb3JtYXRBbW91bnQoZG91YmxlIGQpIHsNCiAgICBsb25nIGxpID0gKGxvbmcpIGQNCiAgICBpZiAoTWF0aC5hYnMoZCAtIGxpKSA8IDAuMDAwMDAwMWQpIHJldHVybiBTdHJpbmcudmFsdWVPZihsaSkNCiAgICByZXR1cm4gU3RyaW5nLnZhbHVlT2YoZCkNCiAgfQ0KfQ=="}}}