{"programModules":{"EXT620MI":{"program":"EXT620MI","triggers":{},"transactions":{"lstSupplierTrns":{"sourceUuid":"c556fdf1-0b23-41bc-a34b-29a5124a7353","name":"lstSupplierTrns","program":"EXT620MI","description":"lstSupplierTrns","active":true,"multi":true,"modified":1751431114041,"modifiedBy":"STAS","outputFields":[{"name":"DIVI","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"SPYN","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SUNO","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SINO","description":"","length":12,"mandatory":false,"type":"A","refField":null},{"name":"VSER","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"VONO","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"ACDT","description":"","length":8,"mandatory":false,"type":"A","refField":null},{"name":"DUDT","description":"","length":8,"mandatory":false,"type":"A","refField":null},{"name":"CUAM","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"DBCR","description":"","length":1,"mandatory":false,"type":"A","refField":null},{"name":"CUCD","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"RMSV","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"PMSV","description":"","length":20,"mandatory":false,"type":"A","refField":null},{"name":"CHKN","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"TRCD","description":"","length":2,"mandatory":false,"type":"A","refField":null},{"name":"FEID","description":"","length":4,"mandatory":false,"type":"A","refField":null},{"name":"FNCN","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"VTXT","description":"","length":40,"mandatory":false,"type":"A","refField":null},{"name":"ACAM","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"TCAM","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"TX15","description":"","length":15,"mandatory":false,"type":"A","refField":null},{"name":"DBIT","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"CDIT","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"LABL","description":"LABEL","length":100,"mandatory":false,"type":"A","refField":null},{"name":"IVTP","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"BLNC","description":"","length":21,"mandatory":false,"type":"A","refField":null},{"name":"ASM1","description":"","length":20,"mandatory":false,"type":"A","refField":null},{"name":"ASM2","description":"","length":20,"mandatory":false,"type":"A","refField":null},{"name":"IVDT","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"TX40","description":"","length":40,"mandatory":false,"type":"A","refField":null}],"inputFields":[{"name":"CONO","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"DIVI","description":"","length":3,"mandatory":false,"type":"A","refField":null},{"name":"SPYN","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"SUNO","description":"","length":10,"mandatory":false,"type":"A","refField":null},{"name":"FDAT","description":"","length":8,"mandatory":false,"type":"A","refField":null},{"name":"TDAT","description":"","length":8,"mandatory":false,"type":"A","refField":null}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"c556fdf1-0b23-41bc-a34b-29a5124a7353":{"uuid":"c556fdf1-0b23-41bc-a34b-29a5124a7353","updated":1762092232435,"updatedBy":"YAEL","created":1749032758668,"createdBy":"STAS","apiVersion":"0.9","beVersion":"16.0.0.20250821122625.5","language":"GROOVY","codeHash":"A961E6B2A4B9F4F43F80D03A93D163830A8CE7766768A67BCFBB92166AAAE19D","code":"aW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGU7DQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcjsNCmltcG9ydCBqYXZhLnV0aWwuKjsNCg0KcHVibGljIGNsYXNzIGxzdFN1cHBsaWVyVHJucyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlOw0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsNCiAgcHJpdmF0ZSBmaW5hbCBMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IHJlc3VsdFJlY29yZHMgPSBuZXcgQXJyYXlMaXN0PD4oKTsNCiAgcHJpdmF0ZSBmaW5hbCBNYXA8U3RyaW5nLCBEb3VibGU+IG9wZW5pbmdCYWxhbmNlcyA9IG5ldyBIYXNoTWFwPD4oKTsNCiAgcHJpdmF0ZSBmaW5hbCBNYXA8U3RyaW5nLCBEb3VibGU+IG9wZW5pbmdEZWJpdHMgPSBuZXcgSGFzaE1hcDw+KCk7DQogIHByaXZhdGUgZmluYWwgTWFwPFN0cmluZywgRG91YmxlPiBvcGVuaW5nQ3JlZGl0cyA9IG5ldyBIYXNoTWFwPD4oKTsNCg0KICBwdWJsaWMgbHN0U3VwcGxpZXJUcm5zKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtKSB7DQogICAgdGhpcy5taSA9IG1pOw0KICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZTsNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtOw0KICB9DQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIFN0cmluZyBjb25vID0gbWkuaW5EYXRhLmdldCgiQ09OTyIpICE9IG51bGwgPyBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpIDogIjc1MCI7DQogICAgU3RyaW5nIGRpdmkgPSBtaS5pbkRhdGEuZ2V0KCJESVZJIikgIT0gbnVsbCA/IG1pLmluRGF0YS5nZXQoIkRJVkkiKS50cmltKCkgOiAiSVNSIjsNCiAgICBTdHJpbmcgc3VubyA9IG1pLmluRGF0YS5nZXQoIlNVTk8iKSAhPSBudWxsID8gbWkuaW5EYXRhLmdldCgiU1VOTyIpLnRyaW0oKSA6ICIiOw0KICAgIFN0cmluZyBzcHluID0gbWkuaW5EYXRhLmdldCgiU1BZTiIpICE9IG51bGwgPyBtaS5pbkRhdGEuZ2V0KCJTUFlOIikudHJpbSgpIDogIiI7DQogICAgaWYgKChzdW5vID09IG51bGwgfHwgc3Vuby5pc0VtcHR5KCkpICYmIChzcHluID09IG51bGwgfHwgc3B5bi5pc0VtcHR5KCkpKSB7DQogICAgICBtaS5lcnJvcigiU1BZTiBvciBTVU5PIG11c3QgYmUgZW50ZXJlZC4iKTsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaW50IGZkYXQgPSBtaS5pbkRhdGEuZ2V0KCJGREFUIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiRkRBVCIpLnRyaW0oKS5pc0VtcHR5KCkNCiAgICAgID8gSW50ZWdlci5wYXJzZUludChtaS5pbkRhdGEuZ2V0KCJGREFUIikpDQogICAgICA6IDE5MDAwMTAxOw0KICAgIFN0cmluZyB0ZGF0U3RyID0gbWkuaW5EYXRhLmdldCgiVERBVCIpOw0KICAgIGludCB0ZGF0Ow0KICAgIGlmICh0ZGF0U3RyID09IG51bGwgfHwgdGRhdFN0ci50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICB0ZGF0ID0gZ2V0VG9kYXkoKTsNCiAgICB9IGVsc2Ugew0KICAgICAgdGRhdCA9IEludGVnZXIucGFyc2VJbnQodGRhdFN0ci50cmltKCkpOw0KICAgIH0NCiAgICBpZiAoZmRhdCA+IDE5MDAwMTAxKSB7DQogICAgICBjYWxjdWxhdGVPcGVuaW5nQmFsYW5jZXMoY29ubywgZGl2aSwgc3B5biwgc3VubywgZmRhdCk7DQogICAgfQ0KICAgIHByb2Nlc3NTdXBwbGllclRyYW5zYWN0aW9ucyhjb25vLCBkaXZpLCBzcHluLCBzdW5vLCBmZGF0LCB0ZGF0KTsNCiAgICBidWJibGVTb3J0KCk7DQogICAgb3V0cHV0UmVzdWx0cygpOw0KICB9DQogIA0KICBwcml2YXRlIHZvaWQgY2FsY3VsYXRlT3BlbmluZ0JhbGFuY2VzKFN0cmluZyBjb25vLCBTdHJpbmcgZGl2aSwgU3RyaW5nIHNweW4sIFN0cmluZyBzdW5vLCBpbnQgZmRhdCkgew0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGZwbGVkZ0V4cCA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKQ0KICAgICAgLmVxKCJFUENPTk8iLCBjb25vKQ0KICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikuZXEoIkVQRElWSSIsIGRpdmkpKQ0KICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikubHQoIkVQQUNEVCIsIFN0cmluZy52YWx1ZU9mKGZkYXQpKSkNCiAgICAgIC5hbmQoDQogICAgICAgIGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBUUkNEIiwgIjQwIikNCiAgICAgICAgLm9yKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBUUkNEIiwgIjUwIikpDQogICAgICApOw0KICANCiAgICBpZiAoc3B5biAhPSBudWxsICYmICFzcHluLmlzRW1wdHkoKSkgew0KICAgICAgZnBsZWRnRXhwID0gZnBsZWRnRXhwLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikuZXEoIkVQU1BZTiIsIHNweW4pKTsNCiAgICB9DQogICAgaWYgKHN1bm8gIT0gbnVsbCAmJiAhc3Vuby5pc0VtcHR5KCkpIHsNCiAgICAgIGZwbGVkZ0V4cCA9IGZwbGVkZ0V4cC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVERyIpLmVxKCJFUFNVTk8iLCBzdW5vKSk7DQogICAgfQ0KICANCiAgICBEQkFjdGlvbiBmcGxlZGdRdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJGUExFREciKQ0KICAgICAgLmluZGV4KCIxMCIpDQogICAgICAubWF0Y2hpbmcoZnBsZWRnRXhwKQ0KICAgICAgLnNlbGVjdGlvbigiRVBESVZJIiwgIkVQU1BZTiIsICJFUFNVTk8iLCAiRVBTSU5PIiwgIkVQVlNFUiIsICJFUFZPTk8iLA0KICAgICAgICAgICAgICAgICAiRVBBQ0RUIiwgIkVQRFVEVCIsICJFUENVQU0iLCAiRVBUUkNEIiwgIkVQQ09OTyIsDQogICAgICAgICAgICAgICAgICJFUFlFQTQiLCAiRVBKUk5PIiwgIkVQSlNOTyIsICJFUElWVFAiKQ0KICAgICAgLmJ1aWxkKCk7DQogIA0KICAgIERCQ29udGFpbmVyIGZwbGVkZ0NvbnRhaW5lciA9IGZwbGVkZ1F1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGZwbGVkZ1F1ZXJ5LnJlYWRBbGwoZnBsZWRnQ29udGFpbmVyLCAwLCB7IERCQ29udGFpbmVyIGZwUmVjb3JkIC0+DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCA9IGNyZWF0ZUJhc2VSZWNvcmQoZnBSZWNvcmQpOw0KICAgICAgU3RyaW5nIHJlY29yZFNweW4gPSByZWNvcmQuZ2V0KCJTUFlOIik7DQogICAgICBTdHJpbmcgcmVjb3JkU3VubyA9IHJlY29yZC5nZXQoIlNVTk8iKTsNCiAgICAgIA0KICAgICAgaWYgKGpvaW5XaXRoRkdMRURHKHJlY29yZCwgY29ubykpIHsNCiAgICAgICAgU3RyaW5nIGRiY3IgPSByZWNvcmQuZ2V0KCJEQkNSIik7DQogICAgICAgIGRvdWJsZSBjdWFtID0gcGFyc2VBbW91bnQocmVjb3JkLmdldCgiQ1VBTSIpKTsNCiAgICAgICAgU3RyaW5nIGtleSA9IHJlY29yZFNweW4gKyAiXyIgKyByZWNvcmRTdW5vOw0KICAgICAgICANCiAgICAgICAgaWYgKCJEIi5lcXVhbHMoZGJjcikpIHsNCiAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlcy5wdXQoa2V5LCBvcGVuaW5nQmFsYW5jZXMuZ2V0T3JEZWZhdWx0KGtleSwgMC4wZCkgKyBjdWFtKTsNCiAgICAgICAgICAgIG9wZW5pbmdEZWJpdHMucHV0KGtleSwgb3BlbmluZ0RlYml0cy5nZXRPckRlZmF1bHQoa2V5LCAwLjBkKSArIGN1YW0pOw0KICAgICAgICB9IGVsc2UgaWYgKCJDIi5lcXVhbHMoZGJjcikpIHsNCiAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlcy5wdXQoa2V5LCBvcGVuaW5nQmFsYW5jZXMuZ2V0T3JEZWZhdWx0KGtleSwgMC4wZCkgLSBjdWFtKTsNCiAgICAgICAgICAgIG9wZW5pbmdDcmVkaXRzLnB1dChrZXksIG9wZW5pbmdDcmVkaXRzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpICsgY3VhbSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9KTsNCiAgfQ0KICANCiAgcHJpdmF0ZSB2b2lkIHByb2Nlc3NTdXBwbGllclRyYW5zYWN0aW9ucyhTdHJpbmcgY29ubywgU3RyaW5nIGRpdmksIFN0cmluZyBzcHluLCBTdHJpbmcgc3VubywgaW50IGZkYXQsIGludCB0ZGF0KSB7DQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZnBsZWRnRXhwID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVERyIpDQogICAgICAuZXEoIkVQQ09OTyIsIGNvbm8pDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBESVZJIiwgZGl2aSkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5nZSgiRVBBQ0RUIiwgU3RyaW5nLnZhbHVlT2YoZmRhdCkpKQ0KICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRlBMRURHIikubGUoIkVQQUNEVCIsIFN0cmluZy52YWx1ZU9mKHRkYXQpKSkNCiAgICAgIC5hbmQoDQogICAgICAgIGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBUUkNEIiwgIjQwIikNCiAgICAgICAgLm9yKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBUUkNEIiwgIjUwIikpDQogICAgICApOw0KICAgICAgDQogICAgaWYgKHNweW4gIT0gbnVsbCAmJiAhc3B5bi5pc0VtcHR5KCkpIHsNCiAgICAgIGZwbGVkZ0V4cCA9IGZwbGVkZ0V4cC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVERyIpLmVxKCJFUFNQWU4iLCBzcHluKSk7DQogICAgfQ0KICAgIGlmIChzdW5vICE9IG51bGwgJiYgIXN1bm8uaXNFbXB0eSgpKSB7DQogICAgICBmcGxlZGdFeHAgPSBmcGxlZGdFeHAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFREciKS5lcSgiRVBTVU5PIiwgc3VubykpOw0KICAgIH0NCiAgICAgIA0KICAgIERCQWN0aW9uIGZwbGVkZ1F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkZQTEVERyIpDQogICAgICAuaW5kZXgoIjEwIikNCiAgICAgIC5tYXRjaGluZyhmcGxlZGdFeHApDQogICAgICAuc2VsZWN0aW9uKCJFUERJVkkiLCAiRVBTUFlOIiwgIkVQU1VOTyIsICJFUFNJTk8iLCAiRVBWU0VSIiwgIkVQVk9OTyIsDQogICAgICAgICAgICAgICAgICJFUEFDRFQiLCAiRVBEVURUIiwgIkVQQ1VBTSIsICJFUFRSQ0QiLCAiRVBDT05PIiwNCiAgICAgICAgICAgICAgICAgIkVQWUVBNCIsICJFUEpSTk8iLCAiRVBKU05PIiwgIkVQSVZUUCIsICJFUElWRFQiKQ0KICAgICAgLmJ1aWxkKCk7DQogICAgICANCiAgICBEQkNvbnRhaW5lciBmcGxlZGdDb250YWluZXIgPSBmcGxlZGdRdWVyeS5nZXRDb250YWluZXIoKTsNCiAgICBmcGxlZGdRdWVyeS5yZWFkQWxsKGZwbGVkZ0NvbnRhaW5lciwgMCwgeyBEQkNvbnRhaW5lciBmcFJlY29yZCAtPg0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQgPSBjcmVhdGVCYXNlUmVjb3JkKGZwUmVjb3JkKTsNCiAgICAgIGlmIChqb2luV2l0aEZHTEVERyhyZWNvcmQsIGNvbm8pKSB7DQogICAgICAgIGpvaW5XaXRoRlBMRURYKHJlY29yZCwgY29ubywgIjQwOSIpOw0KICAgICAgICBqb2luV2l0aEZQTEVEWChyZWNvcmQsIGNvbm8sICI0MDYiKTsNCiAgICAgICAgam9pbldpdGhGUExFRFgocmVjb3JkLCBjb25vLCAiNDUwIik7DQogICAgICAgIGpvaW5XaXRoQ1NZTkJWKHJlY29yZCwgY29ubyk7DQogICAgICAgIGpvaW5XaXRoRkFQQ0hLKHJlY29yZCwgY29ubyk7DQogICAgICAgIGpvaW5XaXRoQ1NZVEFCKHJlY29yZCwgY29ubywgc3Vubyk7DQogICAgICAgIGNhbGN1bGF0ZURlYml0Q3JlZGl0KHJlY29yZCk7DQogICAgICAgIHNldEFzbWFraHRhVmFsdWVzKHJlY29yZCk7DQogICAgICAgIHJlc3VsdFJlY29yZHMuYWRkKHJlY29yZCk7DQogICAgICB9DQogICAgfSk7DQogIH0NCg0KICBwcml2YXRlIE1hcDxTdHJpbmcsIFN0cmluZz4gY3JlYXRlQmFzZVJlY29yZChEQkNvbnRhaW5lciBmcFJlY29yZCkgew0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkID0gbmV3IEhhc2hNYXA8PigpOw0KICAgIHJlY29yZC5wdXQoIkRJVkkiLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQRElWSSIpKSk7DQogICAgcmVjb3JkLnB1dCgiU1BZTiIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBTUFlOIikpKTsNCiAgICByZWNvcmQucHV0KCJTVU5PIiwgU3RyaW5nLnZhbHVlT2YoZnBSZWNvcmQuZ2V0KCJFUFNVTk8iKSkpOw0KICAgIHJlY29yZC5wdXQoIlNJTk8iLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQU0lOTyIpKSk7DQogICAgcmVjb3JkLnB1dCgiVlNFUiIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBWU0VSIikpKTsNCiAgICByZWNvcmQucHV0KCJWT05PIiwgU3RyaW5nLnZhbHVlT2YoZnBSZWNvcmQuZ2V0KCJFUFZPTk8iKSkpOw0KICAgIHJlY29yZC5wdXQoIkFDRFQiLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQQUNEVCIpKSk7DQogICAgcmVjb3JkLnB1dCgiRFVEVCIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBEVURUIikpKTsNCiAgICBkb3VibGUgY3VhbSA9IChEb3VibGUpZnBSZWNvcmQuZ2V0KCJFUENVQU0iKTsNCiAgICByZWNvcmQucHV0KCJDVUFNIiwgZm9ybWF0QW1vdW50KE1hdGguYWJzKGN1YW0pKSk7DQogICAgcmVjb3JkLnB1dCgiVFJDRCIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBUUkNEIikpKTsNCiAgICByZWNvcmQucHV0KCJZRUE0IiwgU3RyaW5nLnZhbHVlT2YoZnBSZWNvcmQuZ2V0KCJFUFlFQTQiKSkpOw0KICAgIHJlY29yZC5wdXQoIkpSTk8iLCBTdHJpbmcudmFsdWVPZihmcFJlY29yZC5nZXQoIkVQSlJOTyIpKSk7DQogICAgcmVjb3JkLnB1dCgiSlNOTyIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBKU05PIikpKTsNCiAgICByZWNvcmQucHV0KCJJVlRQIiwgU3RyaW5nLnZhbHVlT2YoZnBSZWNvcmQuZ2V0KCJFUElWVFAiKSkpOw0KICAgIHJlY29yZC5wdXQoIlJNU1YiLCAiIik7DQogICAgcmVjb3JkLnB1dCgiUE1TViIsICIiKTsNCiAgICByZWNvcmQucHV0KCJDSEtOIiwgIiIpOw0KICAgIHJlY29yZC5wdXQoIlRYMTUiLCAiIik7DQogICAgcmVjb3JkLnB1dCgiREJJVCIsICIwLjAwIik7DQogICAgcmVjb3JkLnB1dCgiQ0RJVCIsICIwLjAwIik7DQogICAgcmVjb3JkLnB1dCgiRkVJRCIsICIiKTsNCiAgICByZWNvcmQucHV0KCJGTkNOIiwgIiIpOw0KICAgIHJlY29yZC5wdXQoIlZUWFQiLCAiIik7DQogICAgcmVjb3JkLnB1dCgiQUNBTSIsICIwLjAwIik7DQogICAgcmVjb3JkLnB1dCgiVENBTSIsICIwLjAwIik7DQogICAgcmVjb3JkLnB1dCgiREJDUiIsICIiKTsNCiAgICByZWNvcmQucHV0KCJDVUNEIiwgIiIpOw0KICAgIHJlY29yZC5wdXQoIkFTTTEiLCAiIik7IA0KICAgIHJlY29yZC5wdXQoIkFTTTIiLCAiIik7IA0KICAgIHJlY29yZC5wdXQoIlRYNDAiLCAiIik7DQogICAgcmVjb3JkLnB1dCgiSVZEVCIsIFN0cmluZy52YWx1ZU9mKGZwUmVjb3JkLmdldCgiRVBJVkRUIikpKTsNCiAgICByZXR1cm4gcmVjb3JkOw0KICB9DQogIA0KICBwcml2YXRlIGJvb2xlYW4gam9pbldpdGhGR0xFREcoTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQsIFN0cmluZyBjb25vKSB7DQogICAgU3RyaW5nIHllYTQgPSByZWNvcmQuZ2V0KCJZRUE0Iik7DQogICAgU3RyaW5nIGpybm8gPSByZWNvcmQuZ2V0KCJKUk5PIik7DQogICAgU3RyaW5nIGpzbm8gPSByZWNvcmQuZ2V0KCJKU05PIik7DQogICAgU3RyaW5nIHRyY2QgPSByZWNvcmQuZ2V0KCJUUkNEIik7DQogICAgU3RyaW5nIGl2dHAgPSByZWNvcmQuZ2V0KCJJVlRQIik7DQogICAgU3RyaW5nIGRpdmkgPSByZWNvcmQuZ2V0KCJESVZJIik7DQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZmdsZWRnRXhwID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZHTEVERyIpDQogICAgICAuZXEoIkVHQ09OTyIsIGNvbm8pDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGR0xFREciKS5lcSgiRUdESVZJIiwgZGl2aSkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGR0xFREciKS5lcSgiRUdZRUE0IiwgeWVhNCkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGR0xFREciKS5lcSgiRUdKUk5PIiwganJubykpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGR0xFREciKS5lcSgiRUdKU05PIiwganNubykpOw0KICAgIERCQWN0aW9uIGZnbGVkZ1F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkZHTEVERyIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5tYXRjaGluZyhmZ2xlZGdFeHApDQogICAgICAuc2VsZWN0aW9uKCJFR0FDQU0iLCAiRUdUQ0FNIiwgIkVHREJDUiIsICJFR0NVQ0QiLCAiRUdGRUlEIiwgIkVHRk5DTiIsICJFR1ZUWFQiKQ0KICAgICAgLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgZmdsZWRnQ29udGFpbmVyID0gZmdsZWRnUXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgZmluYWwgYm9vbGVhbltdIGZvdW5kID0gW2ZhbHNlXTsNCiAgICBmZ2xlZGdRdWVyeS5yZWFkQWxsKGZnbGVkZ0NvbnRhaW5lciwgMCwgeyBEQkNvbnRhaW5lciBmZ1JlY29yZCAtPg0KICAgICAgU3RyaW5nIGZlaWQgPSBTdHJpbmcudmFsdWVPZihmZ1JlY29yZC5nZXQoIkVHRkVJRCIpKTsNCiAgICAgIFN0cmluZyBmbmNuID0gU3RyaW5nLnZhbHVlT2YoZmdSZWNvcmQuZ2V0KCJFR0ZOQ04iKSk7DQogICAgICBib29sZWFuIGlzVmFsaWQgPSBmYWxzZTsNCiAgICAgIGlmICgiNDAiLmVxdWFscyh0cmNkKSAmJiAiQVAxMCIuZXF1YWxzKGZlaWQpKSB7DQogICAgICAgIGlzVmFsaWQgPSB0cnVlOw0KICAgICAgfSBlbHNlIGlmICgiNDAiLmVxdWFscyh0cmNkKSAmJiAoIkFQIi5lcXVhbHMoaXZ0cCkgfHwgIlBSIi5lcXVhbHMoaXZ0cCkpKSB7DQogICAgICAgIGlzVmFsaWQgPSB0cnVlOw0KICAgICAgfSBlbHNlIGlmICgiNTAiLmVxdWFscyh0cmNkKSAmJiAhIjUwMCIuZXF1YWxzKGZuY24pKSB7DQogICAgICAgIGlzVmFsaWQgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgaWYgKGlzVmFsaWQpIHsNCiAgICAgICAgcmVjb3JkLnB1dCgiREJDUiIsIFN0cmluZy52YWx1ZU9mKGZnUmVjb3JkLmdldCgiRUdEQkNSIikpKTsNCiAgICAgICAgcmVjb3JkLnB1dCgiQ1VDRCIsIFN0cmluZy52YWx1ZU9mKGZnUmVjb3JkLmdldCgiRUdDVUNEIikpKTsNCiAgICAgICAgZG91YmxlIGFjYW0gPSAoRG91YmxlKWZnUmVjb3JkLmdldCgiRUdBQ0FNIik7DQogICAgICAgIGRvdWJsZSB0Y2FtID0gKERvdWJsZSlmZ1JlY29yZC5nZXQoIkVHVENBTSIpOw0KICAgICAgICByZWNvcmQucHV0KCJBQ0FNIiwgZm9ybWF0QW1vdW50KGFjYW0pKTsNCiAgICAgICAgcmVjb3JkLnB1dCgiVENBTSIsIGZvcm1hdEFtb3VudCh0Y2FtKSk7DQogICAgICAgIHJlY29yZC5wdXQoIkZFSUQiLCBmZWlkKTsNCiAgICAgICAgcmVjb3JkLnB1dCgiRk5DTiIsIGZuY24pOw0KICAgICAgICByZWNvcmQucHV0KCJWVFhUIiwgU3RyaW5nLnZhbHVlT2YoZmdSZWNvcmQuZ2V0KCJFR1ZUWFQiKSkpOw0KICAgICAgICBmb3VuZFswXSA9IHRydWU7DQogICAgICB9DQogICAgfSk7DQogICAgcmV0dXJuIGZvdW5kWzBdOw0KICB9DQoNCiAgcHJpdmF0ZSB2b2lkIGpvaW5XaXRoRlBMRURYKE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkLCBTdHJpbmcgY29ubywgU3RyaW5nIHBleG4pIHsNCiAgICBpZiAoISI1MCIuZXF1YWxzKHJlY29yZC5nZXQoIlRSQ0QiKSkpIHsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgU3RyaW5nIGRpdmkgPSByZWNvcmQuZ2V0KCJESVZJIik7DQogICAgU3RyaW5nIHllYTQgPSByZWNvcmQuZ2V0KCJZRUE0Iik7DQogICAgU3RyaW5nIGpybm8gPSByZWNvcmQuZ2V0KCJKUk5PIik7DQogICAgU3RyaW5nIGpzbm8gPSByZWNvcmQuZ2V0KCJKU05PIik7DQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZnBsZWR4RXhwID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZQTEVEWCIpDQogICAgICAuZXEoIkVQQ09OTyIsIGNvbm8pDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFRFgiKS5lcSgiRVBESVZJIiwgZGl2aSkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFRFgiKS5lcSgiRVBZRUE0IiwgeWVhNCkpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFRFgiKS5lcSgiRVBKUk5PIiwganJubykpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFRFgiKS5lcSgiRVBKU05PIiwganNubykpDQogICAgICAuYW5kKGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGUExFRFgiKS5lcSgiRVBQRVhOIiwgcGV4bikpOw0KICAgIERCQWN0aW9uIGZwbGVkeFF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkZQTEVEWCIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5tYXRjaGluZyhmcGxlZHhFeHApDQogICAgICAuc2VsZWN0aW9uKCJFUFBFWEkiKQ0KICAgICAgLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgZnBsZWR4Q29udGFpbmVyID0gZnBsZWR4UXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgZnBsZWR4UXVlcnkucmVhZEFsbChmcGxlZHhDb250YWluZXIsIDAsIHsgREJDb250YWluZXIgeFJlY29yZCAtPg0KICAgICAgU3RyaW5nIHBleGkgPSBTdHJpbmcudmFsdWVPZih4UmVjb3JkLmdldCgiRVBQRVhJIikpOw0KICAgICAgaWYgKCI0MDkiLmVxdWFscyhwZXhuKSkgew0KICAgICAgICBpZiAocGV4aS5sZW5ndGgoKSA+IDEwKSB7DQogICAgICAgICAgcmVjb3JkLnB1dCgiUk1TViIsIHBleGkuc3Vic3RyaW5nKHBleGkubGVuZ3RoKCkgLSAxMCkpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlY29yZC5wdXQoIlJNU1YiLCBwZXhpKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICgiNDA2Ii5lcXVhbHMocGV4bikpIHsNCiAgICAgICAgcmVjb3JkLnB1dCgiUE1TViIsIHBleGkpOw0KICAgICAgfSBlbHNlIGlmICgiNDUwIi5lcXVhbHMocGV4bikpIHsNCiAgICAgICAgaWYgKHBleGkubGVuZ3RoKCkgPiAxMCkgew0KICAgICAgICAgIHJlY29yZC5wdXQoIlJNU1YiLCBwZXhpLnN1YnN0cmluZyhwZXhpLmxlbmd0aCgpIC0gMTApKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZWNvcmQucHV0KCJSTVNWIiwgcGV4aSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9KTsNCiAgfQ0KDQogIHByaXZhdGUgdm9pZCBqb2luV2l0aENTWU5CVihNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCwgU3RyaW5nIGNvbm8pIHsNCiAgICBTdHJpbmcgZGl2aSA9IHJlY29yZC5nZXQoIkRJVkkiKTsNCiAgICBTdHJpbmcgdnNlciA9IHJlY29yZC5nZXQoIlZTRVIiKTsNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBjc3luYnZFeHAgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ1NZTkJWIikNCiAgICAgIC5lcSgiRFZDT05PIiwgY29ubykNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkNTWU5CViIpLmVxKCJEVkRJVkkiLCBkaXZpKSkNCiAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkNTWU5CViIpLmVxKCJEVlZTRVIiLCB2c2VyKSk7DQogICAgREJBY3Rpb24gY3N5bmJ2UXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ1NZTkJWIikNCiAgICAgIC5tYXRjaGluZyhjc3luYnZFeHApDQogICAgICAuc2VsZWN0aW9uKCJEVlRYMTUiKQ0KICAgICAgLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY3N5bmJ2Q29udGFpbmVyID0gY3N5bmJ2UXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgY3N5bmJ2UXVlcnkucmVhZEFsbChjc3luYnZDb250YWluZXIsIDAsIHsgREJDb250YWluZXIgY1JlY29yZCAtPg0KICAgICAgcmVjb3JkLnB1dCgiVFgxNSIsIFN0cmluZy52YWx1ZU9mKGNSZWNvcmQuZ2V0KCJEVlRYMTUiKSkpOw0KICAgIH0pOw0KICB9DQoNCiAgcHJpdmF0ZSB2b2lkIGpvaW5XaXRoRkFQQ0hLKE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkLCBTdHJpbmcgY29ubykgew0KICAgIFN0cmluZyBkaXZpID0gcmVjb3JkLmdldCgiRElWSSIpOw0KICAgIFN0cmluZyB2c2VyID0gcmVjb3JkLmdldCgiVlNFUiIpOw0KICAgIFN0cmluZyB2b25vID0gcmVjb3JkLmdldCgiVk9OTyIpOw0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGZhcGNoa0V4cCA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJGQVBDSEsiKQ0KICAgICAgLmVxKCJDS0NPTk8iLCBjb25vKQ0KICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRkFQQ0hLIikuZXEoIkNLRElWSSIsIGRpdmkpKQ0KICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRkFQQ0hLIikuZXEoIkNLVlNFUiIsIHZzZXIpKQ0KICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRkFQQ0hLIikuZXEoIkNLVk9OTyIsIHZvbm8pKTsNCiAgICBEQkFjdGlvbiBmYXBjaGtRdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJGQVBDSEsiKQ0KICAgICAgLmluZGV4KCIwMCIpDQogICAgICAubWF0Y2hpbmcoZmFwY2hrRXhwKQ0KICAgICAgLnNlbGVjdGlvbigiQ0tDSEtOIikNCiAgICAgIC5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGZhcGNoa0NvbnRhaW5lciA9IGZhcGNoa1F1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGZhcGNoa1F1ZXJ5LnJlYWRBbGwoZmFwY2hrQ29udGFpbmVyLCAwLCB7IERCQ29udGFpbmVyIGNSZWNvcmQgLT4NCiAgICAgIFN0cmluZyBjaGtuID0gU3RyaW5nLnZhbHVlT2YoY1JlY29yZC5nZXQoIkNLQ0hLTiIpKTsNCiAgICAgIGlmIChjaGtuICE9IG51bGwgJiYgIWNoa24udHJpbSgpLmlzRW1wdHkoKSAmJiAhIm51bGwiLmVxdWFscyhjaGtuKSkgew0KICAgICAgICByZWNvcmQucHV0KCJDSEtOIiwgY2hrbik7DQogICAgICB9DQogICAgfSk7DQogIH0NCiAgDQogIHByaXZhdGUgdm9pZCBqb2luV2l0aENTWVRBQihNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCwgU3RyaW5nIGNvbm8sIFN0cmluZyBzdW5vUGFyYW0pIHsNCiAgICBTdHJpbmcgZmVpZCA9IHJlY29yZC5nZXQoIkZFSUQiKTsNCiAgICBTdHJpbmcgZm5jbiA9IHJlY29yZC5nZXQoIkZOQ04iKTsNCiAgICBpZiAoZm5jbi5sZW5ndGgoKSA8IDMpIHsNCiAgICAgIGZuY24gPSBTdHJpbmcuZm9ybWF0KCIlMDNkIiwgSW50ZWdlci5wYXJzZUludChmbmNuKSk7DQogICAgfQ0KICAgIFN0cmluZyBkaXZpID0gcmVjb3JkLmdldCgiRElWSSIpOw0KICAgIGlmIChmZWlkID09IG51bGwgfHwgZmVpZC5pc0VtcHR5KCkgfHwgZm5jbiA9PSBudWxsIHx8IGZuY24uaXNFbXB0eSgpKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgU3RyaW5nIHN0a3kgPSBmZWlkICsgZm5jbjsNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBjc3l0YWJFeHAgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ1NZVEFCIikuZXEoIkNUQ09OTyIsIGNvbm8pDQogICAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkNTWVRBQiIpLmVxKCJDVERJVkkiLCBkaXZpKSkNCiAgICAgICAgLmFuZChkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiQ1NZVEFCIikuZXEoIkNUU1RDTyIsICJGRk5DIikpDQogICAgICAgIC5hbmQoZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkNTWVRBQiIpLmVxKCJDVFNUS1kiLCBzdGt5KSk7DQogICAgREJBY3Rpb24gY3N5dGFiUXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ1NZVEFCIikNCiAgICAgICAgLm1hdGNoaW5nKGNzeXRhYkV4cCkNCiAgICAgICAgLnNlbGVjdGlvbigiQ1RUWDQwIikNCiAgICAgICAgLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY3N5dGFiQ29udGFpbmVyID0gY3N5dGFiUXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgY3N5dGFiUXVlcnkucmVhZEFsbChjc3l0YWJDb250YWluZXIsIDAsIHsgREJDb250YWluZXIgY3NSZWNvcmQgLT4NCiAgICAgICAgU3RyaW5nIHR4NDAgPSBTdHJpbmcudmFsdWVPZihjc1JlY29yZC5nZXQoIkNUVFg0MCIpKTsNCiAgICAgICAgaWYgKHR4NDAgIT0gbnVsbCAmJiAhdHg0MC50cmltKCkuaXNFbXB0eSgpICYmICEibnVsbCIuZXF1YWxzKHR4NDApKSB7DQogICAgICAgICAgICByZWNvcmQucHV0KCJUWDQwIiwgdHg0MCk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgfQ0KDQogIHByaXZhdGUgdm9pZCBjYWxjdWxhdGVEZWJpdENyZWRpdChNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCkgew0KICAgIFN0cmluZyBkYmNyID0gcmVjb3JkLmdldCgiREJDUiIpOw0KICAgIFN0cmluZyBjdWFtID0gcmVjb3JkLmdldCgiQ1VBTSIpOw0KICAgIGlmICgiRCIuZXF1YWxzKGRiY3IpKSB7DQogICAgICByZWNvcmQucHV0KCJEQklUIiwgY3VhbSk7DQogICAgICByZWNvcmQucHV0KCJDRElUIiwgIjAuMDAiKTsNCiAgICB9IGVsc2UgaWYgKCJDIi5lcXVhbHMoZGJjcikpIHsNCiAgICAgIHJlY29yZC5wdXQoIkRCSVQiLCAiMC4wMCIpOw0KICAgICAgcmVjb3JkLnB1dCgiQ0RJVCIsIGN1YW0pOw0KICAgIH0NCiAgfQ0KDQogIHByaXZhdGUgYm9vbGVhbiBzaG91bGRTd2FwKE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkMSwgTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQyKSB7DQogICAgU3RyaW5nIHNweW4xID0gcmVjb3JkMS5nZXQoIlNQWU4iKTsNCiAgICBTdHJpbmcgc3B5bjIgPSByZWNvcmQyLmdldCgiU1BZTiIpOw0KICAgIGludCBzcHluQ29tcGFyZSA9IHNweW4xLmNvbXBhcmVUbyhzcHluMik7DQogICAgaWYgKHNweW5Db21wYXJlICE9IDApIHsNCiAgICAgIHJldHVybiBzcHluQ29tcGFyZSA+IDA7DQogICAgfQ0KICAgIGludCBhY2R0MSA9IEludGVnZXIucGFyc2VJbnQocmVjb3JkMS5nZXQoIkFDRFQiKSk7DQogICAgaW50IGFjZHQyID0gSW50ZWdlci5wYXJzZUludChyZWNvcmQyLmdldCgiQUNEVCIpKTsNCiAgICBpZiAoYWNkdDEgIT0gYWNkdDIpIHsNCiAgICAgIHJldHVybiBhY2R0MSA+IGFjZHQyOw0KICAgIH0NCiAgICBTdHJpbmcgdm9ubzEgPSByZWNvcmQxLmdldCgiVk9OTyIpOw0KICAgIFN0cmluZyB2b25vMiA9IHJlY29yZDIuZ2V0KCJWT05PIik7DQogICAgcmV0dXJuIHZvbm8xLmNvbXBhcmVUbyh2b25vMikgPiAwOw0KICB9DQogIA0KICBwcml2YXRlIE1hcDxTdHJpbmcsIFN0cmluZz4gY3JlYXRlU3VtbWFyeVJlY29yZChNYXA8U3RyaW5nLCBTdHJpbmc+IGJhc2VSZWNvcmQpIHsNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHN1bW1hcnlSZWNvcmQgPSBuZXcgSGFzaE1hcDw+KGJhc2VSZWNvcmQpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJWT05PIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJTSU5PIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJDSEtOIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJSTVNWIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJQTVNWIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJBQ0RUIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJEVURUIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJUUkNEIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJGRUlEIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJGTkNOIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJBU00xIiwgIiIpOw0KICAgIHN1bW1hcnlSZWNvcmQucHV0KCJBU00yIiwgIiIpOyANCiAgICByZXR1cm4gc3VtbWFyeVJlY29yZDsNCiAgfQ0KICANCiAgcHJpdmF0ZSB2b2lkIG91dHB1dFJlY29yZChNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCkgew0KICAgIG1pLm91dERhdGEucHV0KCJESVZJIiwgcmVjb3JkLmdldCgiRElWSSIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiU1BZTiIsIHJlY29yZC5nZXQoIlNQWU4iKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIlNVTk8iLCByZWNvcmQuZ2V0KCJTVU5PIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJTSU5PIiwgcmVjb3JkLmdldCgiU0lOTyIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiVlNFUiIsIHJlY29yZC5nZXQoIlZTRVIiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIlZPTk8iLCByZWNvcmQuZ2V0KCJWT05PIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJBQ0RUIiwgcmVjb3JkLmdldCgiQUNEVCIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiRFVEVCIsIHJlY29yZC5nZXQoIkRVRFQiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkNVQU0iLCByZWNvcmQuZ2V0KCJDVUFNIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJEQkNSIiwgcmVjb3JkLmdldCgiREJDUiIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiQ1VDRCIsIHJlY29yZC5nZXQoIkNVQ0QiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIlJNU1YiLCByZWNvcmQuZ2V0KCJSTVNWIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJQTVNWIiwgcmVjb3JkLmdldCgiUE1TViIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiQ0hLTiIsIHN0cmlwTGVhZGluZ1plcm9zKHJlY29yZC5nZXQoIkNIS04iKSkpOw0KICAgIG1pLm91dERhdGEucHV0KCJUUkNEIiwgcmVjb3JkLmdldCgiVFJDRCIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiRkVJRCIsIHJlY29yZC5nZXQoIkZFSUQiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkZOQ04iLCByZWNvcmQuZ2V0KCJGTkNOIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJWVFhUIiwgcmVjb3JkLmdldCgiVlRYVCIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiQUNBTSIsIHJlY29yZC5nZXQoIkFDQU0iKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIlRDQU0iLCByZWNvcmQuZ2V0KCJUQ0FNIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJUWDE1IiwgcmVjb3JkLmdldCgiVFgxNSIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiREJJVCIsIHJlY29yZC5nZXQoIkRCSVQiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkNESVQiLCByZWNvcmQuZ2V0KCJDRElUIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJMQUJMIiwgcmVjb3JkLmdldCgiTEFCTCIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiSVZUUCIsIHJlY29yZC5nZXQoIklWVFAiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIkJMTkMiLCByZWNvcmQuZ2V0KCJCTE5DIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJBU00xIiwgcmVjb3JkLmdldCgiQVNNMSIpKTsNCiAgICBtaS5vdXREYXRhLnB1dCgiQVNNMiIsIHJlY29yZC5nZXQoIkFTTTIiKSk7DQogICAgbWkub3V0RGF0YS5wdXQoIlRYNDAiLCByZWNvcmQuZ2V0KCJUWDQwIikpOw0KICAgIG1pLm91dERhdGEucHV0KCJJVkRUIiwgcmVjb3JkLmdldCgiSVZEVCIpKTsNCiAgICBtaS53cml0ZSgpOw0KICB9DQogIA0KICBwcml2YXRlIFN0cmluZyBzdHJpcExlYWRpbmdaZXJvcyhTdHJpbmcgdmFsdWUpIHsNCiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIG51bGwNCiAgICByZXR1cm4gdmFsdWUucmVwbGFjZUZpcnN0KCdeMCsoPyEkKScsICcnKQ0KICB9DQogIA0KICBwcml2YXRlIGRvdWJsZSBwYXJzZUFtb3VudChTdHJpbmcgYW1vdW50KSB7DQogICAgdHJ5IHsNCiAgICAgIHJldHVybiBEb3VibGUucGFyc2VEb3VibGUoYW1vdW50KTsNCiAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkgew0KICAgICAgcmV0dXJuIDAuMDsNCiAgICB9DQogIH0NCg0KICBwcml2YXRlIGludCBnZXRUb2RheSgpIHsNCiAgICBMb2NhbERhdGUgdG9kYXkgPSBMb2NhbERhdGUubm93KCk7DQogICAgRGF0ZVRpbWVGb3JtYXR0ZXIgZm9ybWF0dGVyID0gRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpOw0KICAgIHJldHVybiBJbnRlZ2VyLnBhcnNlSW50KHRvZGF5LmZvcm1hdChmb3JtYXR0ZXIpKTsNCiAgfQ0KDQogIHByaXZhdGUgU3RyaW5nIGZvcm1hdEFtb3VudChkb3VibGUgYW1vdW50KSB7DQogICAgcmV0dXJuIFN0cmluZy5mb3JtYXQoIiUuMmYiLCBhbW91bnQpOw0KICB9DQogIA0KICBwcml2YXRlIHZvaWQgYnViYmxlU29ydCgpIHsNCiAgICBpbnQgbiA9IHJlc3VsdFJlY29yZHMuc2l6ZSgpOw0KICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKykgew0KICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuIC0gaSAtIDE7IGorKykgew0KICAgICAgICBpZiAoc2hvdWxkU3dhcChyZXN1bHRSZWNvcmRzLmdldChqKSwgcmVzdWx0UmVjb3Jkcy5nZXQoaiArIDEpKSkgew0KICAgICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gdGVtcCA9IHJlc3VsdFJlY29yZHMuZ2V0KGopOw0KICAgICAgICAgIHJlc3VsdFJlY29yZHMuc2V0KGosIHJlc3VsdFJlY29yZHMuZ2V0KGogKyAxKSk7DQogICAgICAgICAgcmVzdWx0UmVjb3Jkcy5zZXQoaiArIDEsIHRlbXApOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQogIA0KICBwcml2YXRlIHZvaWQgb3V0cHV0UmVzdWx0cygpIHsNCiAgICBpZiAocmVzdWx0UmVjb3Jkcy5pc0VtcHR5KCkpIHsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgTWFwPFN0cmluZywgTWFwPFN0cmluZywgTGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+Pj4+IGdyb3VwZWREYXRhID0gbmV3IExpbmtlZEhhc2hNYXA8PigpOw0KICAgIGZvciAoTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQgOiByZXN1bHRSZWNvcmRzKSB7DQogICAgICBTdHJpbmcgc3B5biA9IHJlY29yZC5nZXQoIlNQWU4iKTsNCiAgICAgIFN0cmluZyBzdW5vID0gcmVjb3JkLmdldCgiU1VOTyIpOw0KICAgICAgZ3JvdXBlZERhdGEuY29tcHV0ZUlmQWJzZW50KHNweW4sIHtrIC0+IG5ldyBMaW5rZWRIYXNoTWFwPD4oKX0pDQogICAgICAgICAgICAgICAgIC5jb21wdXRlSWZBYnNlbnQoc3Vubywge2sgLT4gbmV3IEFycmF5TGlzdDw+KCl9KQ0KICAgICAgICAgICAgICAgICAuYWRkKHJlY29yZCk7DQogICAgfQ0KICAgIA0KICAgIGZvciAoU3RyaW5nIHNweW4gOiBncm91cGVkRGF0YS5rZXlTZXQoKSkgew0KICAgICAgTWFwPFN0cmluZywgTGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+Pj4gc3Vub0dyb3VwcyA9IGdyb3VwZWREYXRhLmdldChzcHluKTsNCiAgICAgIGRvdWJsZSBzcHluVG90YWxEZWJpdCA9IDAuMDsNCiAgICAgIGRvdWJsZSBzcHluVG90YWxDcmVkaXQgPSAwLjA7DQogICAgICBmb3IgKFN0cmluZyBzdW5vIDogc3Vub0dyb3Vwcy5rZXlTZXQoKSkgew0KICAgICAgICBMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IHRyYW5zYWN0aW9ucyA9IHN1bm9Hcm91cHMuZ2V0KHN1bm8pOw0KICAgICAgICBpZiAodHJhbnNhY3Rpb25zLmlzRW1wdHkoKSkgY29udGludWU7DQogICAgICAgIFN0cmluZyBrZXkgPSBzcHluICsgIl8iICsgc3VubzsNCiAgICAgICAgZG91YmxlIHJ1bm5pbmdCYWxhbmNlID0gb3BlbmluZ0JhbGFuY2VzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpOw0KICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG9wZW5pbmdSZWNvcmQgPSBjcmVhdGVPcGVuaW5nQmFsYW5jZVJlY29yZCh0cmFuc2FjdGlvbnMuZ2V0KDApLCBydW5uaW5nQmFsYW5jZSk7DQogICAgICAgIG9wZW5pbmdSZWNvcmQucHV0KCJMQUJMIiwgIk9QRU5JTkdfQkFMQU5DRSIpOw0KICAgICAgICBvcGVuaW5nUmVjb3JkLnB1dCgiQkxOQyIsIGZvcm1hdEFtb3VudChydW5uaW5nQmFsYW5jZSkpOw0KICAgICAgICBvdXRwdXRSZWNvcmQob3BlbmluZ1JlY29yZCk7DQogICAgICAgIGRvdWJsZSB0cmFuc2FjdGlvbkRlYml0VG90YWwgPSAwLjA7DQogICAgICAgIGRvdWJsZSB0cmFuc2FjdGlvbkNyZWRpdFRvdGFsID0gMC4wOw0KICAgICAgICBmb3IgKE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkIDogdHJhbnNhY3Rpb25zKSB7DQogICAgICAgICAgcmVjb3JkLnB1dCgiTEFCTCIsICJUUkFOU0FDVElPTiIpOw0KICAgICAgICAgIGRvdWJsZSBkZWJpdCA9IHBhcnNlQW1vdW50KHJlY29yZC5nZXQoIkRCSVQiKSk7DQogICAgICAgICAgZG91YmxlIGNyZWRpdCA9IHBhcnNlQW1vdW50KHJlY29yZC5nZXQoIkNESVQiKSk7DQogICAgICAgICAgcnVubmluZ0JhbGFuY2UgPSBydW5uaW5nQmFsYW5jZSArIGRlYml0IC0gY3JlZGl0Ow0KICAgICAgICAgIHJlY29yZC5wdXQoIkJMTkMiLCBmb3JtYXRBbW91bnQocnVubmluZ0JhbGFuY2UpKTsgDQogICAgICAgICAgdHJhbnNhY3Rpb25EZWJpdFRvdGFsICs9IGRlYml0Ow0KICAgICAgICAgIHRyYW5zYWN0aW9uQ3JlZGl0VG90YWwgKz0gY3JlZGl0Ow0KICAgICAgICAgIG91dHB1dFJlY29yZChyZWNvcmQpOw0KICAgICAgICB9DQogICAgICAgIGRvdWJsZSBvcGVuaW5nRGViaXQgPSBvcGVuaW5nRGViaXRzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpOw0KICAgICAgICBkb3VibGUgb3BlbmluZ0NyZWRpdCA9IG9wZW5pbmdDcmVkaXRzLmdldE9yRGVmYXVsdChrZXksIDAuMGQpOw0KICAgICAgICBkb3VibGUgdG90YWxEZWJpdCA9IG9wZW5pbmdEZWJpdCArIHRyYW5zYWN0aW9uRGViaXRUb3RhbDsNCiAgICAgICAgZG91YmxlIHRvdGFsQ3JlZGl0ID0gb3BlbmluZ0NyZWRpdCArIHRyYW5zYWN0aW9uQ3JlZGl0VG90YWw7DQogICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gY2xvc2luZ1JlY29yZCA9IGNyZWF0ZVN1bW1hcnlSZWNvcmQodHJhbnNhY3Rpb25zLmdldCh0cmFuc2FjdGlvbnMuc2l6ZSgpIC0gMSkpOw0KICAgICAgICBjbG9zaW5nUmVjb3JkLnB1dCgiREJJVCIsIGZvcm1hdEFtb3VudCh0b3RhbERlYml0KSk7ICAgICAgICAgICAgIA0KICAgICAgICBjbG9zaW5nUmVjb3JkLnB1dCgiQ0RJVCIsIGZvcm1hdEFtb3VudCh0b3RhbENyZWRpdCkpOyAgICAgICAgICAgICAgDQogICAgICAgIGNsb3NpbmdSZWNvcmQucHV0KCJDVUFNIiwgZm9ybWF0QW1vdW50KE1hdGguYWJzKHRvdGFsRGViaXQgLSB0b3RhbENyZWRpdCkpKTsNCiAgICAgICAgY2xvc2luZ1JlY29yZC5wdXQoIkJMTkMiLCBmb3JtYXRBbW91bnQocnVubmluZ0JhbGFuY2UpKTsgICAgICAgICAgICAgIA0KICAgICAgICBjbG9zaW5nUmVjb3JkLnB1dCgiVlRYVCIsICJDbG9zaW5nIEJhbGFuY2UiKTsNCiAgICAgICAgY2xvc2luZ1JlY29yZC5wdXQoIkxBQkwiLCAiQ0xPU0lOR19CQUxBTkNFIik7DQogICAgICAgIG91dHB1dFJlY29yZChjbG9zaW5nUmVjb3JkKTsNCiAgICAgICAgaWYgKHN1bm9Hcm91cHMuc2l6ZSgpID4gMSkgew0KICAgICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gc3Vub1N1bW1hcnkgPSBjcmVhdGVTdW1tYXJ5UmVjb3JkKHRyYW5zYWN0aW9ucy5nZXQoMCkpOw0KICAgICAgICAgIHN1bm9TdW1tYXJ5LnB1dCgiREJJVCIsIGZvcm1hdEFtb3VudCh0b3RhbERlYml0KSk7DQogICAgICAgICAgc3Vub1N1bW1hcnkucHV0KCJDRElUIiwgZm9ybWF0QW1vdW50KHRvdGFsQ3JlZGl0KSk7DQogICAgICAgICAgc3Vub1N1bW1hcnkucHV0KCJDVUFNIiwgZm9ybWF0QW1vdW50KE1hdGguYWJzKHRvdGFsRGViaXQgLSB0b3RhbENyZWRpdCkpKTsNCiAgICAgICAgICBzdW5vU3VtbWFyeS5wdXQoIkJMTkMiLCBmb3JtYXRBbW91bnQocnVubmluZ0JhbGFuY2UpKTsNCiAgICAgICAgICBzdW5vU3VtbWFyeS5wdXQoIlZUWFQiLCAiVG90YWwgZm9yIHN1cHBsaWVyICIgKyBzdW5vKTsNCiAgICAgICAgICBzdW5vU3VtbWFyeS5wdXQoIkxBQkwiLCAiU1VQUExJRVJfVE9UQUwiKTsNCiAgICAgICAgICBvdXRwdXRSZWNvcmQoc3Vub1N1bW1hcnkpOw0KICAgICAgICB9DQogICAgICAgIHNweW5Ub3RhbERlYml0ICs9IHRvdGFsRGViaXQNCiAgICAgICAgc3B5blRvdGFsQ3JlZGl0ICs9IHRvdGFsQ3JlZGl0OyANCiAgICAgIH0NCiAgICAgIGlmIChncm91cGVkRGF0YS5zaXplKCkgPiAxKSB7DQogICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gc3B5blN1bW1hcnkgPSBjcmVhdGVTdW1tYXJ5UmVjb3JkKA0KICAgICAgICAgIGdyb3VwZWREYXRhLmdldChzcHluKS52YWx1ZXMoKS5pdGVyYXRvcigpLm5leHQoKS5nZXQoMCkNCiAgICAgICAgKTsNCiAgICAgICAgc3B5blN1bW1hcnkucHV0KCJEQklUIiwgZm9ybWF0QW1vdW50KHNweW5Ub3RhbERlYml0KSk7DQogICAgICAgIHNweW5TdW1tYXJ5LnB1dCgiQ0RJVCIsIGZvcm1hdEFtb3VudChzcHluVG90YWxDcmVkaXQpKTsNCiAgICAgICAgc3B5blN1bW1hcnkucHV0KCJDVUFNIiwgZm9ybWF0QW1vdW50KE1hdGguYWJzKHNweW5Ub3RhbERlYml0IC0gc3B5blRvdGFsQ3JlZGl0KSkpOw0KICAgICAgICBzcHluU3VtbWFyeS5wdXQoIlZUWFQiLCAiVG90YWwgZm9yIGJlbmVmaWNpYXJ5ICIgKyBzcHluKTsNCiAgICAgICAgc3B5blN1bW1hcnkucHV0KCJMQUJMIiwgIkJFTkVGSUNJQVJZX1RPVEFMIik7DQogICAgICAgIG91dHB1dFJlY29yZChzcHluU3VtbWFyeSk7DQogICAgICB9DQogICAgfQ0KICB9DQogIA0KICBwcml2YXRlIE1hcDxTdHJpbmcsIFN0cmluZz4gY3JlYXRlT3BlbmluZ0JhbGFuY2VSZWNvcmQoTWFwPFN0cmluZywgU3RyaW5nPiBiYXNlUmVjb3JkLCBkb3VibGUgYmFsYW5jZSkgew0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gb3BlbmluZ1JlY29yZCA9IG5ldyBIYXNoTWFwPD4oYmFzZVJlY29yZCk7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlZPTk8iLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlNJTk8iLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkNIS04iLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlJNU1YiLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlBNU1YiLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkFDRFQiLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkRVRFQiLCAiIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIlZUWFQiLCAiT3BlbmluZyBCYWxhbmNlIik7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkFTTTEiLCAiIik7IA0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJBU00yIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJUUkNEIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJGRUlEIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJGTkNOIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJBQ0FNIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJUQ0FNIiwgIiIpOw0KICAgIG9wZW5pbmdSZWNvcmQucHV0KCJUWDE1IiwgIiIpOw0KICAgIFN0cmluZyBzcHluID0gYmFzZVJlY29yZC5nZXQoIlNQWU4iKTsNCiAgICBTdHJpbmcgc3VubyA9IGJhc2VSZWNvcmQuZ2V0KCJTVU5PIik7DQogICAgU3RyaW5nIGtleSA9IHNweW4gKyAiXyIgKyBzdW5vOw0KICAgIGRvdWJsZSB0b3RhbERlYml0ID0gb3BlbmluZ0RlYml0cy5nZXRPckRlZmF1bHQoa2V5LCAwLjBkKTsNCiAgICBkb3VibGUgdG90YWxDcmVkaXQgPSBvcGVuaW5nQ3JlZGl0cy5nZXRPckRlZmF1bHQoa2V5LCAwLjBkKTsNCiAgICBvcGVuaW5nUmVjb3JkLnB1dCgiREJJVCIsIGZvcm1hdEFtb3VudCh0b3RhbERlYml0KSk7DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkNESVQiLCBmb3JtYXRBbW91bnQodG90YWxDcmVkaXQpKTsNCiAgICBpZiAoYmFsYW5jZSA+PSAwKSB7DQogICAgICBvcGVuaW5nUmVjb3JkLnB1dCgiREJDUiIsICJEIik7DQogICAgfSBlbHNlIHsNCiAgICAgIG9wZW5pbmdSZWNvcmQucHV0KCJEQkNSIiwgIkMiKTsNCiAgICB9DQogICAgb3BlbmluZ1JlY29yZC5wdXQoIkNVQU0iLCBmb3JtYXRBbW91bnQoTWF0aC5hYnMoYmFsYW5jZSkpKTsNCiAgICByZXR1cm4gb3BlbmluZ1JlY29yZDsNCiAgfQ0KICAgIA0KICBwcml2YXRlIHZvaWQgc2V0QXNtYWtodGFWYWx1ZXMoTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQpIHsNCiAgICBTdHJpbmcgY2hrbiA9IHJlY29yZC5nZXQoIkNIS04iKTsNCiAgICBTdHJpbmcgcG1zdiA9IHJlY29yZC5nZXQoIlBNU1YiKTsgICAgICAgDQogICAgU3RyaW5nIHJtc3YgPSByZWNvcmQuZ2V0KCJSTVNWIik7DQogICAgU3RyaW5nIG9yaWdpbmFsU2lubyA9IHJlY29yZC5nZXQoIlNJTk8iKTsgDQogICAgaWYgKGNoa24gIT0gbnVsbCAmJiAhY2hrbi50cmltKCkuaXNFbXB0eSgpICYmICEibnVsbCIuZXF1YWxzKGNoa24pKSB7DQogICAgICAgIHJlY29yZC5wdXQoIkFTTTEiLCBzdHJpcExlYWRpbmdaZXJvcyhjaGtuKSk7DQogICAgICAgIHJlY29yZC5wdXQoIkFTTTIiLCBvcmlnaW5hbFNpbm8pOw0KICAgIH0gZWxzZSBpZiAocm1zdiAhPSBudWxsICYmICFybXN2LnRyaW0oKS5pc0VtcHR5KCkgJiYgISJudWxsIi5lcXVhbHMocm1zdikpIHsNCiAgICAgICAgcmVjb3JkLnB1dCgiQVNNMSIsIHJtc3YpOw0KICAgICAgICByZWNvcmQucHV0KCJBU00yIiwgb3JpZ2luYWxTaW5vKTsNCiAgICB9IGVsc2UgaWYgKHBtc3YgIT0gbnVsbCAmJiAhcG1zdi50cmltKCkuaXNFbXB0eSgpICYmICEibnVsbCIuZXF1YWxzKHBtc3YpKSB7DQogICAgICAgIHJlY29yZC5wdXQoIkFTTTEiLCBwbXN2KTsNCiAgICAgICAgcmVjb3JkLnB1dCgiQVNNMiIsIG9yaWdpbmFsU2lubyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKG9yaWdpbmFsU2lubyAhPSBudWxsICYmICFvcmlnaW5hbFNpbm8udHJpbSgpLmlzRW1wdHkoKSAmJiAhIm51bGwiLmVxdWFscyhvcmlnaW5hbFNpbm8pKSB7DQogICAgICAgICAgICByZWNvcmQucHV0KCJBU00xIiwgb3JpZ2luYWxTaW5vKTsNCiAgICAgICAgICAgIHJlY29yZC5wdXQoIkFTTTIiLCAiIik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZWNvcmQucHV0KCJBU00xIiwgIiIpOw0KICAgICAgICAgICAgcmVjb3JkLnB1dCgiQVNNMiIsICIiKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ=="}}}